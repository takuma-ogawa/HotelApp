(function(e){function t(t){for(var i,r,n=t[0],o=t[1],c=t[2],u=0,m=[];u<n.length;u++)r=n[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&m.push(s[r][0]),s[r]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);d&&d(t);while(m.length)m.shift()();return l.push.apply(l,c||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a=l[t],i=!0,n=1;n<a.length;n++){var o=a[n];0!==s[o]&&(i=!1)}i&&(l.splice(t--,1),e=r(r.s=a[0]))}return e}var i={},s={app:0},l=[];function r(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=i,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(a,i,function(t){return e[t]}.bind(null,i));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],o=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var d=o;l.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0c4e":function(e,t,a){"use strict";a("3376")},3376:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);var i=a("2909"),s=a("2b0e"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("el-container",{staticStyle:{height:"100%"}},[a("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"200px"}},[a("el-menu",[a("el-menu-item",{staticStyle:{padding:"0"}},[a("router-link",{class:e.openedClass(0,0),staticStyle:{color:"black",display:"block","padding-left":"10%"},attrs:{to:"/uedaunyu/"},nativeOn:{click:function(t){e.changeOpenMenuIndex(0,0)}}},[e._v("HOME")])],1),a("el-menu-item",{staticStyle:{padding:"0"}},[a("router-link",{class:e.openedClass(1,0),staticStyle:{color:"black",display:"block","padding-left":"10%"},attrs:{to:"/uedaunyu/rollCallStatus"},nativeOn:{click:function(t){e.changeOpenMenuIndex(1,0)}}},[e._v("点呼状況")])],1),a("el-menu-item",{staticStyle:{padding:"0"}},[a("router-link",{class:e.openedClass(2,0),staticStyle:{color:"black",display:"block","padding-left":"10%"},attrs:{to:"/uedaunyu/rollCallLogInput"},nativeOn:{click:function(t){e.changeOpenMenuIndex(2,0)}}},[e._v("点呼記録入力")])],1),a("el-menu-item",{staticStyle:{padding:"0"}},[a("router-link",{class:e.openedClass(3,0),staticStyle:{color:"black",display:"block","padding-left":"10%"},attrs:{to:"/uedaunyu/rollCallLogFormOutput"},nativeOn:{click:function(t){e.changeOpenMenuIndex(3,0)}}},[e._v("点呼記録簿出力")])],1),a("el-submenu",[a("template",{slot:"title"},[e._v("\n                        マスタ\n                    ")]),e._l(e.sidebarmenu,function(t,i){return e.displayFlag(t)?a("el-menu-item",{key:t.number,staticStyle:{padding:"0"}},[a("router-link",{class:e.openedClass(4,i),staticStyle:{color:"black",display:"block","padding-left":"10%"},attrs:{to:t.link},nativeOn:{click:function(t){e.changeOpenMenuIndex(4,i)}}},[e._v(e._s(t.name))])],1):e._e()})],2)],1)],1),a("el-container",[a("el-header",{staticStyle:{"background-color":"#93C5F9",color:"white"}},[a("span",{staticStyle:{display:"block",float:"right"}},[a("el-button",{attrs:{type:"info"},on:{click:e.logout}},[e._v("ログアウト")])],1)]),a("el-main",[a("router-view")],1),a("el-footer",{staticStyle:{"background-color":"#C0C4CC",color:"white"}})],1)],1)],1)},r=[],n={logout:function(e){e.$store.commit("resetLoginInfo"),e.$router.push("/")},login:function(e,t){e.$store.commit("updateLoginInfo",t)}},o={data:function(){return{sidebarmenu:[]}},methods:{logout:function(){this.$router.push("/")},displayFlag:function(e){return!0},changeOpenMenuIndex:function(e,t){this.$store.commit("changeOpenedMenuIndex",{categoryIndex:e,sidebarIndex:t})},openedClass:function(e,t){return this.$store.state.openedMenuIndex.categoryIndex==e&&this.$store.state.openedMenuIndex.sidebarIndex==t?"selectedMenu":""}},created:function(){this.sidebarmenu=[{name:"社員マスタ",link:"/uedaunyu/masterMember"},{name:"行先マスタ",link:"/uedaunyu/masterDestination"},{name:"車両マスタ",link:"/uedaunyu/masterVehicle"},{name:"疾病マスタ",link:"/uedaunyu/masterDisease"},{name:"指示事項マスタ",link:"/uedaunyu/masterInstruction"},{name:"アラート設定マスタ",link:"/uedaunyu/masterAlertSetting"}]}},c=o,d=(a("582d"),a("68f9"),a("2877")),u=Object(d["a"])(c,l,r,!1,null,"a0794a70",null),m=u.exports,h=a("9cf3"),v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("h1",[e._v("ようこそ "+e._s(e.$store.state.login.userName)+" さん")]),a("h3",[e._v("\n        今日は"),a("br"),e._v(e._s(e.nowDate())+" です\n    ")])])},g=[],p=a("53ca"),f={filling_zero:function(e){if(e<10)var t="0"+String(e);else t=String(e);return t},time_edit:function(e,t){if("object"==Object(p["a"])(e))var a=e;else if("string"==typeof e)a=new Date(e);var i=String(a.getFullYear()),s=this.filling_zero(a.getMonth()+1),l=this.filling_zero(a.getDate()),r=this.filling_zero(a.getHours()),n=this.filling_zero(a.getMinutes());if(1==t)o=i+"-"+s+"-"+l+"T"+r+":"+n+":00";else if(2==t)o=s+"/"+l+"　"+r+":"+n;else if(3==t)o=r+":"+n;else if(4==t)o=i+"-"+s+"-"+l;else if(5==t)o=i+"/"+s+"/"+l;else if(6==t)var o=i+"年"+s+"月"+l+"日";return o},compareDate:function(e,t){return new Date(e).getTime()<=new Date(t).getTime()},nowJapanDate:function(){return new Date((new Date).toLocaleString({timeZone:"Asia/Tokyo"}))},nowJapanDateJapaStyle:function(){var e=this.nowJapanDate();return this.time_edit(e,6)},nowJapanDateInput:function(){var e=this.nowJapanDate();return this.time_edit(e,4)},nowJapanYear:function(){var e=(new Date).toLocaleString({timeZone:"Asia/Tokyo"}),t=new Date(e);return t.getMonth()+1<=3&&t.getDate()<=31?t.getFullYear()-1:t.getFullYear()},JapanYear:function(e){var t=e;return t.getMonth()+1<=3&&t.getDate()<=31?t.getFullYear()-1:t.getFullYear()}},b={name:"Home",data:function(){return{data:{kaisu:{number:null,disabled:!0}}}},methods:{nowDate:function(){return f.nowJapanDateJapaStyle()}},mounted:function(){this.data.kaisu.number=this.$store.state.login.kaisu}},D=b,y=Object(d["a"])(D,v,g,!1,null,"23781e83",null),I=y.exports,C=a("8c4f"),S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("社員マスタ")])]),a("div",{attrs:{slot:"default"},slot:"default"},[a("el-form",{ref:"searchForm",attrs:{model:e.data.search.model,rules:e.data.search.validation,"label-width":"120px"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-3"},[a("label",{staticClass:"col-form-label px-1",staticStyle:{width:"100%"},attrs:{for:"社員検索"}},[e._v("社員名")]),a("el-form-item",{attrs:{"label-width":"0",prop:"syoriKubun"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"text"},model:{value:e.data.search.model.Name,callback:function(t){e.$set(e.data.search.model,"Name",t)},expression:"data.search.model.Name"}})],1)],1),a("div",{staticClass:"col-3"},[a("label",{staticClass:"col-form-label px-1",staticStyle:{width:"100%"},attrs:{for:""}},[e._v("検索")]),a("el-button",{staticStyle:{"margin-left":"2%"},attrs:{type:"warning",icon:"el-icon-search"},on:{click:e.searchName}},[e._v("検索")])],1)])]),a("div",{staticClass:"row",staticStyle:{"margin-top":"4%"}},[a("div",{staticClass:"col-12"},[a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{staticStyle:{"margin-left":"2%",width:"10%"},attrs:{type:"danger",disabled:e.data.disabled.save},on:{click:e.submit}},[e._v("保存")])],1),a("el-form",{ref:"masterForm",staticStyle:{"white-space":"nowrap","overflow-x":"scroll"},attrs:{model:e.data.master.model,rules:e.data.master.validation,"label-width":"120px"}},[a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticStyle:{width:"40%",display:"inline"},attrs:{type:"primary",disabled:e.data.disabled.save},on:{click:function(t){e.addMeisai(e.data.newID,"","","","",null,null,"",!1,!1,!1,!1,1,3)}}},[e._v("明細を追加")])],1),a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th"),a("th",[e._v("\n                                        社員コード\n                                    ")]),a("th",[e._v("\n                                        社員名\n                                    ")]),a("th",[e._v("\n                                        フリガナ\n                                    ")]),a("th",[e._v("\n                                        パスワード\n                                    ")]),a("th",[e._v("\n                                        デフォルト車両\n                                    ")]),a("th",[e._v("\n                                        デフォルト行先\n                                    ")]),a("th",[e._v("\n                                        長距離勤務or地場勤務\n                                    ")]),a("th",{staticStyle:{width:"7%"}},[e._v("\n                                        運行者\n                                    ")]),a("th",{staticStyle:{width:"7%"}},[e._v("\n                                        点呼者\n                                    ")]),a("th",{staticStyle:{width:"7%"}},[e._v("\n                                        運行管理者\n                                    ")]),a("th",{staticStyle:{width:"7%"}},[e._v("\n                                        統括運行管理者\n                                    ")]),a("th",[e._v("\n                                        権限\n                                    ")])])]),e._l(e.data.master.model.meisai,function(t,i){return 2!=t.Crud?a("tr",[a("td",[a("el-button",{attrs:{type:"primary",name:"name",disabled:e.data.disabled.save},on:{click:function(a){e.removeMeisai(t,i)}}},[e._v("削除")])],1),a("td",[a("el-form-item",{attrs:{"label-width":"0",prop:"meisai["+i+"].Member.MemberCode",rules:{required:!0,message:"社員コードが入力されていません",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",disabled:e.data.disabled.save},on:{change:function(a){e.masterCodeOverLap(t,i)}},model:{value:t.Member.MemberCode,callback:function(a){e.$set(t.Member,"MemberCode",a)},expression:"meisai_data.Member.MemberCode"}})],1)],1),a("td",[a("el-form-item",{attrs:{"label-width":"0",prop:"meisai["+i+"].Member.MemberName",rules:{required:!0,message:"社員名が入力されていません",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",disabled:e.data.disabled.save},on:{change:function(a){e.changeCrud(t,1)}},model:{value:t.Member.MemberName,callback:function(a){e.$set(t.Member,"MemberName",a)},expression:"meisai_data.Member.MemberName"}})],1)],1),a("td",[a("el-form-item",{attrs:{"label-width":"0",prop:"meisai["+i+"].Member.MemberPhoneticName",rules:{required:!0,message:"フリガナが入力されていません",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",disabled:e.data.disabled.save},on:{change:function(a){e.changeCrud(t,1)}},model:{value:t.Member.MemberPhoneticName,callback:function(a){e.$set(t.Member,"MemberPhoneticName",a)},expression:"meisai_data.Member.MemberPhoneticName"}})],1)],1),a("td",[a("el-form-item",{attrs:{"label-width":"0",prop:"meisai["+i+"].Member.Password",rules:{required:!0,message:"パスワードが入力されていません",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",disabled:e.data.disabled.save},on:{change:function(a){e.changeCrud(t,1)}},model:{value:t.Member.Password,callback:function(a){e.$set(t.Member,"Password",a)},expression:"meisai_data.Member.Password"}})],1)],1),a("td",[a("el-select",{attrs:{name:"name",disabled:e.data.disabled.save},on:{change:function(a){e.changeCrud(t,1)}},model:{value:t.Member.VehicleID,callback:function(a){e.$set(t.Member,"VehicleID",a)},expression:"meisai_data.Member.VehicleID"}},[a("el-option",{attrs:{value:null,label:"選択しない"}}),e._l(e.data.vehicles,function(e){return a("el-option",{attrs:{value:e.VehicleID,label:e.VehicleName}})})],2)],1),a("td",[a("el-select",{attrs:{name:"name",disabled:e.data.disabled.save},on:{change:function(a){e.changeCrud(t,1)}},model:{value:t.Member.DestinationID,callback:function(a){e.$set(t.Member,"DestinationID",a)},expression:"meisai_data.Member.DestinationID"}},[a("el-option",{attrs:{value:null,label:"選択しない"}}),e._l(e.data.destinations,function(e){return a("el-option",{attrs:{value:e.DestinationID,label:e.DestinationName}})})],2)],1),a("td",[a("el-form-item",{attrs:{"label-width":"0",prop:"meisai["+i+"].Member.IsLongDistance",rules:{required:!0,message:"長距離or地場が選択されていません",trigger:"blur"}}},[a("el-select",{attrs:{name:"name",disabled:e.data.disabled.save},on:{change:function(a){e.changeCrud(t,1)}},model:{value:t.Member.IsLongDistance,callback:function(a){e.$set(t.Member,"IsLongDistance",a)},expression:"meisai_data.Member.IsLongDistance"}},[a("el-option",{attrs:{value:!1,label:"地場"}}),a("el-option",{attrs:{value:!0,label:"長距離"}})],1)],1)],1),a("td",[a("el-checkbox",{attrs:{disabled:e.data.disabled.save},on:{change:function(a){e.changeCrud(t,1)}},model:{value:t.Member.IsDriver,callback:function(a){e.$set(t.Member,"IsDriver",a)},expression:"meisai_data.Member.IsDriver"}})],1),a("td",[a("el-checkbox",{attrs:{disabled:e.data.disabled.save},on:{change:function(a){e.changeCrud(t,1)}},model:{value:t.Member.IsRollCaller,callback:function(a){e.$set(t.Member,"IsRollCaller",a)},expression:"meisai_data.Member.IsRollCaller"}})],1),a("td",[a("el-checkbox",{attrs:{disabled:e.data.disabled.save},on:{change:function(a){e.changeCrud(t,1)}},model:{value:t.Member.IsOperationManager,callback:function(a){e.$set(t.Member,"IsOperationManager",a)},expression:"meisai_data.Member.IsOperationManager"}})],1),a("td",[a("el-checkbox",{attrs:{disabled:e.data.disabled.save},on:{change:function(a){e.changeCrud(t,1)}},model:{value:t.Member.IsGeneralOperationManager,callback:function(a){e.$set(t.Member,"IsGeneralOperationManager",a)},expression:"meisai_data.Member.IsGeneralOperationManager"}})],1),a("td",[a("el-select",{attrs:{disabled:e.data.disabled.save},on:{change:function(a){e.changeCrud(t,1)}},model:{value:t.Member.RoleID,callback:function(a){e.$set(t.Member,"RoleID",a)},expression:"meisai_data.Member.RoleID"}},e._l(e.data.roles,function(e){return a("el-option",{attrs:{value:e.RoleID,label:e.RoleName}})}))],1)]):e._e()})],2),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticStyle:{width:"40%",display:"inline"},attrs:{type:"primary",disabled:e.data.disabled.save},on:{click:function(t){e.addMeisai(e.data.newID,"","","","",null,null,"",!1,!1,!1,!1,1,3)}}},[e._v("明細を追加")])],1)]),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{staticStyle:{"margin-left":"2%",width:"10%"},attrs:{type:"danger",disabled:e.data.disabled.save},on:{click:e.submit}},[e._v("保存")])],1)],1)])],1)])],1)},_=[],w=(a("386d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card",class:[e.type&&"card-"+e.type]},[e.$slots.image?a("div",{staticClass:"card-image"},[e._t("image")],2):e._e(),e.$slots.header||e.title?a("div",{staticClass:"card-header",class:e.headerClasses},[e._t("header",[a("h4",{staticClass:"card-title"},[e._v(e._s(e.title))]),e.subTitle?a("p",{staticClass:"card-category"},[e._v(e._s(e.subTitle))]):e._e()])],2):e._e(),e.$slots.default?a("div",{staticClass:"card-body",class:e.bodyClasses},[e._t("default")],2):e._e(),e._t("raw-content"),e.$slots.footer?a("div",{staticClass:"card-footer",class:e.footerClasses},[e._t("footer")],2):e._e()],2)}),M=[],x={name:"card",props:{title:{type:String,description:"Card title"},subTitle:{type:String,description:"Card subtitle"},type:{type:String,description:"Card type (e.g primary/danger etc)"},headerClasses:{type:[String,Object,Array],description:"Card header css classes"},bodyClasses:{type:[String,Object,Array],description:"Card body css classes"},footerClasses:{type:[String,Object,Array],description:"Card footer css classes"}}},k=x,$=Object(d["a"])(k,w,M,!1,null,null,null),L=$.exports,R={ApiUrl:function(){return this.routeUrl="http://tenkosystem.azurewebsites.net",this.controller={Members:"Members",Destinations:"Destinations",Vehicles:"Vehicles",Diseases:"Diseases",Roles:"Roles",RollCallMethods:"RollCallMethods",AlertSettings:"AlertSettings",Instructions:"Instructions",MasterMembers:"MasterMembers",MasterDestinations:"MasterDestinations",MasterVehicles:"MasterVehicles",MasterDiseases:"MasterDiseases",MasterInstructions:"MasterInstructions",MasterAlertSettings:"MasterAlertSettings",RollCallLogsInputs:"RollCallLogsInputs",RollCallStatus:"RollCallStatus",RollCallLogFormOutputs:"RollCallLogFormOutputs"},this.Login=function(e){return this.createGetUrl("Members","Login",e)},this.GetMembers=function(e){return this.createGetUrl("Members","GetMembers",e)},this.GetMembersMaster=function(e){return this.createGetUrl("MasterMembers","Get",e)},this.IsMemberCodeOverLap=function(e){return this.createGetUrl("Members","IsCodeOverLap",e)},this.MemberSearch=function(e){return this.createGetUrl("MasterMembers","Search",e)},this.MembersMasterSave=function(){return this.createUrl("MasterMembers","Save")},this.GetDestinations=function(e){return this.createGetUrl("Destinations","GetDestinations",e)},this.GetDestinationsMaster=function(e){return this.createGetUrl("MasterDestinations","Get",e)},this.IsDestinationCodeOverLap=function(e){return this.createGetUrl("Destinations","IsCodeOverLap",e)},this.DestinationSearch=function(e){return this.createGetUrl("MasterDestinations","Search",e)},this.DestinationsMasterSave=function(){return this.createUrl("MasterDestinations","Save")},this.GetVehicles=function(e){return this.createGetUrl("Vehicles","GetVehicles",e)},this.GetVehiclesMaster=function(e){return this.createGetUrl("MasterVehicles","Get",e)},this.IsVehicleCodeOverLap=function(e){return this.createGetUrl("Vehicles","IsCodeOverLap",e)},this.VehicleSearch=function(e){return this.createGetUrl("MasterVehicles","Search",e)},this.VehiclesMasterSave=function(){return this.createUrl("MasterVehicles","Save")},this.GetDiseases=function(e){return this.createGetUrl("Diseases","GetDiseases",e)},this.GetDiseasesMaster=function(e){return this.createGetUrl("MasterDiseases","Get",e)},this.IsDiseaseCodeOverLap=function(e){return this.createGetUrl("Diseases","IsCodeOverLap",e)},this.DiseaseSearch=function(e){return this.createGetUrl("MasterDiseases","Search",e)},this.DiseasesMasterSave=function(){return this.createUrl("MasterDiseases","Save")},this.GetInstructions=function(e){return this.createGetUrl("Instructions","GetInstructions",e)},this.GetInstructionsMaster=function(e){return this.createGetUrl("MasterInstructions","Get",e)},this.IsInstructionCodeOverLap=function(e){return this.createGetUrl("Instructions","IsCodeOverLap",e)},this.InstructionSearch=function(e){return this.createGetUrl("MasterInstructions","Search",e)},this.InstructionsMasterSave=function(){return this.createUrl("MasterInstructions","Save")},this.GetAlertSettings=function(e){return this.createGetUrl("AlertSettings","GetAlertSettings",e)},this.GetAlertSettingsMaster=function(e){return this.createGetUrl("MasterAlertSettings","Get",e)},this.AlertSettingsMasterSave=function(){return this.createUrl("MasterAlertSettings","Save")},this.GetRoles=function(e){return this.createGetUrl("Roles","GetRoles",e)},this.GetRollCallMethods=function(){return this.createUrl("RollCallMethods","RollCallMethods")},this.GetRollCallLogInputs=function(e){return this.createGetUrl("RollCallLogsInputs","ServiceLog",e)},this.RollCallLogInputsSave=function(){return this.createUrl("RollCallLogsInputs","Save")},this.RollCallLogInputsDelete=function(){return this.createUrl("RollCallLogsInputs","Delete")},this.GetRollCallLogInputMasterData=function(e){return this.createGetUrl("RollCallLogsInputs","MasterData",e)},this.GetRollCallStatus=function(e){return this.createGetUrl("RollCallStatus","ServiceLog",e)},this.RollCallStatusSave=function(){return this.createUrl("RollCallStatus","Save")},this.RollCallStatusSendEmail=function(){return this.createUrl("RollCallStatus","Email")},this.GetRollCallStatusMasterData=function(e){return this.createGetUrl("RollCallStatus","MasterData",e)},this.GetRollCallLogFormOutputURL=function(e){return this.createGetUrl("RollCallLogFormOutputs","FormOutput",e)},this.createUrl=function(e,t){return this.routeUrl+"/api/"+this.controller[e]+"/"+t},this.createGetUrl=function(e,t,a){for(var i=this.createUrl(e,t),s=0;s<a.length;s++){var l=a[s].key,r=a[s].value;i+=0==s?"?"+l+"="+r:"&"+l+"="+r}return i},this}},N={name:"niukeSyukei",components:{Card:L},data:function(){return{data:{companyID:"",newID:-1,search:{model:{memberName:""},validation:{Name:[{required:!0,message:"社員名が入力されていません",trigger:"blur"}]}},master:{model:{meisai:[]}},vehicles:[],destinations:[],roles:[],disabled:{save:!1}}}},methods:{searchName:function(){var e=this;this.$refs["searchForm"].validate(function(t){t&&axios.get(R.ApiUrl().MemberSearch([{key:"CompanyID",value:e.data.companyID},{key:"Name",value:e.data.search.model.Name}])).then(function(t){console.log(t.data),e.$set(e.data.master.model,"meisai",t.data)}).catch(function(e){return console.log(e)})})},masterCodeOverLap:function(e,t){var a=this;axios.get(R.ApiUrl().IsMemberCodeOverLap([{key:"CompanyID",value:this.data.companyID},{key:"MemberID",value:e.Member.MemberID},{key:"MemberCode",value:e.Member.MemberCode}])).then(function(i){if(console.log(i.data),i.data)alert("入力されたコードは既に存在します"),e.Member.MemberCode="";else for(var s=0;s<a.data.master.model.meisai.length;s++)a.data.master.model.meisai[s].Member.MemberCode==e.Member.MemberCode&&t!=s&&2!=a.data.master.model.meisai[s].Crud&&(alert("入力されたコードは既に存在します"),e.Member.MemberCode="")}).catch(function(e){return console.log(e)}),this.changeCrud(e,1)},getMembers:function(){var e=this;axios.get(R.ApiUrl().GetMembersMaster([{key:"CompanyID",value:this.data.companyID}])).then(function(t){e.$set(e.data.master.model,"meisai",t.data)}).catch(function(e){return console.log(e)})},createMeisaiData:function(e,t,a,i,s,l,r,n,o,c,d,u,m,h){return{Member:{MemberID:e,MemberCode:t,MemberName:a,MemberPhoneticName:i,Password:s,VehicleID:l,DestinationID:r,IsLongDistance:n,IsDriver:o,IsRollCaller:c,IsOperationManager:d,IsGeneralOperationManager:u,RoleID:m,CompanyID:this.data.companyID,EditorID:this.data.editorID},Crud:h}},addMeisai:function(e,t,a,i,s,l,r,n,o,c,d,u,m,h){var v=this.createMeisaiData(e,t,a,i,s,l,r,n,o,c,d,u,m,h);this.data.master.model.meisai.push(v),console.log(this.data.master.model.meisai)},removeMeisai:function(e,t){3==e.Crud?this.data.master.model.meisai.splice(t,1):this.$set(e,"Crud",2)},changeCrud:function(e,t){3!=e.Crud&&this.$set(e,"Crud",t)},changeEditorID:function(e){for(var t in e)0!=e[t].Crud&&(e[t].Member.EditorID=this.data.editorID)},submit:function(){var e=this;this.$refs["masterForm"].validate(function(t){t&&(e.changeEditorID(e.data.master.model.meisai),e.data.disabled.save=!0,axios.post(R.ApiUrl().MembersMasterSave(),e.data.master.model.meisai).then(function(t){t.data?(e.$message({message:"登録に成功しました",type:"success"}),e.getMembers()):e.$message({message:"登録に失敗しました",type:"error"}),e.data.disabled.save=!1}).catch(function(t){e.$message({message:"通信に失敗しました",type:"error"}),e.data.disabled.save=!1}))})}},created:function(){var e=this;this.data.companyID=this.$store.state.login.companyID,this.data.editorID=this.$store.state.login.userID,this.getMembers(),axios.get(R.ApiUrl().GetDestinations([{key:"CompanyID",value:this.data.companyID}])).then(function(t){e.$set(e.data,"destinations",t.data)}).catch(function(e){return console.log(e)}),axios.get(R.ApiUrl().GetVehicles([{key:"CompanyID",value:this.data.companyID}])).then(function(t){e.$set(e.data,"vehicles",t.data)}).catch(function(e){return console.log(e)}),axios.get(R.ApiUrl().GetRoles([{key:"CompanyID",value:this.data.companyID}])).then(function(t){e.$set(e.data,"roles",t.data)}).catch(function(e){return console.log(e)})},mounted:function(){},watch:{}},A=N,O=Object(d["a"])(A,S,_,!1,null,null,null),V=O.exports,U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("行先マスタ")])]),a("div",{attrs:{slot:"default"},slot:"default"},[a("el-form",{ref:"searchForm",attrs:{model:e.data.search.model,rules:e.data.search.validation,"label-width":"120px"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-3"},[a("label",{staticClass:"col-form-label px-1",staticStyle:{width:"100%"},attrs:{for:"行先検索"}},[e._v("行先名")]),a("el-form-item",{attrs:{"label-width":"0",prop:"syoriKubun"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"text"},model:{value:e.data.search.model.Name,callback:function(t){e.$set(e.data.search.model,"Name",t)},expression:"data.search.model.Name"}})],1)],1),a("div",{staticClass:"col-3"},[a("label",{staticClass:"col-form-label px-1",staticStyle:{width:"100%"},attrs:{for:""}},[e._v("検索")]),a("el-button",{staticStyle:{"margin-left":"2%"},attrs:{type:"warning",icon:"el-icon-search"},on:{click:e.searchName}},[e._v("検索")])],1)])]),a("div",{staticClass:"row",staticStyle:{"margin-top":"4%"}},[a("div",{staticClass:"col-12"},[a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{staticStyle:{"margin-left":"2%",width:"10%"},attrs:{type:"danger",disabled:e.data.disabled.save},on:{click:e.submit}},[e._v("保存")])],1),a("el-form",{ref:"masterForm",attrs:{model:e.data.master.model,rules:e.data.master.validation,"label-width":"120px"}},[a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticStyle:{width:"40%",display:"inline"},attrs:{type:"primary",disabled:e.data.disabled.save},on:{click:function(t){e.addMeisai(e.data.newID,"","","",3)}}},[e._v("明細を追加")])],1),a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th"),a("th",[e._v("\n                                        行先コード\n                                    ")]),a("th",[e._v("\n                                        行先名\n                                    ")]),a("th",[e._v("\n                                        長距離or地場\n                                    ")])])]),e._l(e.data.master.model.meisai,function(t,i){return 2!=t.Crud?a("tr",[a("td",[a("el-button",{attrs:{type:"primary",name:"name",disabled:e.data.disabled.save},on:{click:function(a){e.removeMeisai(t,i)}}},[e._v("削除")])],1),a("td",[a("el-form-item",{attrs:{"label-width":"0",prop:"meisai["+i+"].Destination.DestinationCode",rules:{required:!0,message:"行先コードが入力されていません",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",disabled:e.data.disabled.save},on:{change:function(a){e.masterCodeOverLap(t,i)}},model:{value:t.Destination.DestinationCode,callback:function(a){e.$set(t.Destination,"DestinationCode",a)},expression:"meisai_data.Destination.DestinationCode"}})],1)],1),a("td",[a("el-form-item",{attrs:{"label-width":"0",prop:"meisai["+i+"].Destination.DestinationName",rules:{required:!0,message:"行先名が入力されていません",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",disabled:e.data.disabled.save},on:{change:function(a){e.changeCrud(t,1)}},model:{value:t.Destination.DestinationName,callback:function(a){e.$set(t.Destination,"DestinationName",a)},expression:"meisai_data.Destination.DestinationName"}})],1)],1),a("td",[a("el-form-item",{attrs:{"label-width":"0",prop:"meisai["+i+"].Destination.IsLongDistance",rules:{required:!0,message:"長距離or地場が選択されていません",trigger:"blur"}}},[a("el-select",{attrs:{name:"name",disabled:e.data.disabled.save},on:{change:function(a){e.changeCrud(t,1)}},model:{value:t.Destination.IsLongDistance,callback:function(a){e.$set(t.Destination,"IsLongDistance",a)},expression:"meisai_data.Destination.IsLongDistance"}},[a("el-option",{attrs:{value:!1,label:"地場"}}),a("el-option",{attrs:{value:!0,label:"長距離"}})],1)],1)],1)]):e._e()})],2),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticStyle:{width:"40%",display:"inline"},attrs:{type:"primary",disabled:e.data.disabled.save},on:{click:function(t){e.addMeisai(e.data.newID,"","","",3)}}},[e._v("明細を追加")])],1)]),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{staticStyle:{"margin-left":"2%",width:"10%"},attrs:{type:"danger",disabled:e.data.disabled.save},on:{click:e.submit}},[e._v("保存")])],1)],1)])],1)])],1)},G=[],E={name:"niukeSyukei",components:{Card:L},data:function(){return{data:{companyID:"",newID:-1,search:{model:{memberName:""},validation:{Name:[{required:!0,message:"行先名が入力されていません",trigger:"blur"}]}},master:{model:{meisai:[]}},disabled:{save:!1}}}},methods:{searchName:function(){var e=this;this.$refs["searchForm"].validate(function(t){t&&axios.get(R.ApiUrl().DestinationSearch([{key:"CompanyID",value:e.data.companyID},{key:"Name",value:e.data.search.model.Name}])).then(function(t){console.log(t.data),e.$set(e.data.master.model,"meisai",t.data)}).catch(function(e){return console.log(e)})})},masterCodeOverLap:function(e,t){var a=this;console.log(R.ApiUrl().IsDestinationCodeOverLap([{key:"CompanyID",value:this.data.companyID},{key:"DestinationID",value:e.Destination.DestinationID},{key:"DestinationCode",value:e.Destination.DestinationCode}])),axios.get(R.ApiUrl().IsDestinationCodeOverLap([{key:"CompanyID",value:this.data.companyID},{key:"DestinationID",value:e.Destination.DestinationID},{key:"DestinationCode",value:e.Destination.DestinationCode}])).then(function(i){if(i.data)alert("入力されたコードは既に存在します"),e.Destination.DestinationCode="";else for(var s=0;s<a.data.master.model.meisai.length;s++)a.data.master.model.meisai[s].Destination.DestinationCode==e.Destination.DestinationCode&&t!=s&&2!=a.data.master.model.meisai[s].Crud&&(alert("入力されたコードは既に存在します"),e.Destination.DestinationCode="")}).catch(function(e){return console.log(e)}),this.changeCrud(e,1)},getDestinations:function(){var e=this;axios.get(R.ApiUrl().GetDestinationsMaster([{key:"CompanyID",value:this.data.companyID}])).then(function(t){e.$set(e.data.master.model,"meisai",t.data)}).catch(function(e){return console.log(e)})},createMeisaiData:function(e,t,a,i,s){return{Destination:{DestinationID:e,DestinationCode:t,DestinationName:a,IsLongDistance:i,CompanyID:this.data.companyID,EditorID:this.data.editorID},Crud:s}},addMeisai:function(e,t,a,i,s){var l=this.createMeisaiData(e,t,a,i,s);this.data.master.model.meisai.push(l),console.log(this.data.master.model.meisai)},removeMeisai:function(e,t){3==e.Crud?this.data.master.model.meisai.splice(t,1):this.$set(e,"Crud",2)},changeCrud:function(e,t){3!=e.Crud&&this.$set(e,"Crud",t)},changeEditorID:function(e){for(var t in e)0!=e[t].Crud&&(e[t].Destination.EditorID=this.data.editorID)},submit:function(){var e=this;this.$refs["masterForm"].validate(function(t){t&&(e.changeEditorID(e.data.master.model.meisai),e.data.disabled.save=!0,axios.post(R.ApiUrl().DestinationsMasterSave(),e.data.master.model.meisai).then(function(t){t.data?(e.$message({message:"登録に成功しました",type:"success"}),e.getDestinations()):e.$message({message:"登録に失敗しました",type:"error"}),e.data.disabled.save=!1}).catch(function(t){e.$message({message:"通信に失敗しました",type:"error"}),e.data.disabled.save=!1}))})}},created:function(){this.data.companyID=this.$store.state.login.companyID,this.data.editorID=this.$store.state.login.userID,this.getDestinations()},mounted:function(){},watch:{}},F=E,q=Object(d["a"])(F,U,G,!1,null,null,null),j=q.exports,K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("車両マスタ")])]),a("div",{attrs:{slot:"default"},slot:"default"},[a("el-form",{ref:"searchForm",attrs:{model:e.data.search.model,rules:e.data.search.validation,"label-width":"120px"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-3"},[a("label",{staticClass:"col-form-label px-1",staticStyle:{width:"100%"},attrs:{for:"車両検索"}},[e._v("車両名")]),a("el-form-item",{attrs:{"label-width":"0",prop:"syoriKubun"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"text"},model:{value:e.data.search.model.Name,callback:function(t){e.$set(e.data.search.model,"Name",t)},expression:"data.search.model.Name"}})],1)],1),a("div",{staticClass:"col-3"},[a("label",{staticClass:"col-form-label px-1",staticStyle:{width:"100%"},attrs:{for:""}},[e._v("検索")]),a("el-button",{staticStyle:{"margin-left":"2%"},attrs:{type:"warning",icon:"el-icon-search"},on:{click:e.searchName}},[e._v("検索")])],1)])]),a("div",{staticClass:"row",staticStyle:{"margin-top":"4%"}},[a("div",{staticClass:"col-12"},[a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{staticStyle:{"margin-left":"2%",width:"10%"},attrs:{type:"danger",disabled:e.data.disabled.save},on:{click:e.submit}},[e._v("保存")])],1),a("el-form",{ref:"masterForm",attrs:{model:e.data.master.model,rules:e.data.master.validation,"label-width":"120px"}},[a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticStyle:{width:"40%",display:"inline"},attrs:{type:"primary",disabled:e.data.disabled.save},on:{click:function(t){e.addMeisai(e.data.newID,"","",3)}}},[e._v("明細を追加")])],1),a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th"),a("th",[e._v("\n                                        車両コード\n                                    ")]),a("th",[e._v("\n                                        車両名\n                                    ")])])]),e._l(e.data.master.model.meisai,function(t,i){return 2!=t.Crud?a("tr",[a("td",[a("el-button",{attrs:{type:"primary",name:"name",disabled:e.data.disabled.save},on:{click:function(a){e.removeMeisai(t,i)}}},[e._v("削除")])],1),a("td",[a("el-form-item",{attrs:{"label-width":"0",prop:"meisai["+i+"].Vehicle.VehicleCode",rules:{required:!0,message:"車両コードが入力されていません",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",disabled:e.data.disabled.save},on:{change:function(a){e.masterCodeOverLap(t,i)}},model:{value:t.Vehicle.VehicleCode,callback:function(a){e.$set(t.Vehicle,"VehicleCode",a)},expression:"meisai_data.Vehicle.VehicleCode"}})],1)],1),a("td",[a("el-form-item",{attrs:{"label-width":"0",prop:"meisai["+i+"].Vehicle.VehicleName",rules:{required:!0,message:"車両名が入力されていません",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",disabled:e.data.disabled.save},on:{change:function(a){e.changeCrud(t,1)}},model:{value:t.Vehicle.VehicleName,callback:function(a){e.$set(t.Vehicle,"VehicleName",a)},expression:"meisai_data.Vehicle.VehicleName"}})],1)],1)]):e._e()})],2),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticStyle:{width:"40%",display:"inline"},attrs:{type:"primary",disabled:e.data.disabled.save},on:{click:function(t){e.addMeisai(e.data.newID,"","",3)}}},[e._v("明細を追加")])],1)]),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{staticStyle:{"margin-left":"2%",width:"10%"},attrs:{type:"danger",disabled:e.data.disabled.save},on:{click:e.submit}},[e._v("保存")])],1)],1)])],1)])],1)},T=[],P={name:"niukeSyukei",components:{Card:L},data:function(){return{data:{companyID:"",newID:-1,search:{model:{memberName:""},validation:{Name:[{required:!0,message:"車両名が入力されていません",trigger:"blur"}]}},master:{model:{meisai:[]}},disabled:{save:!1}}}},methods:{searchName:function(){var e=this;this.$refs["searchForm"].validate(function(t){t&&axios.get(R.ApiUrl().VehicleSearch([{key:"CompanyID",value:e.data.companyID},{key:"Name",value:e.data.search.model.Name}])).then(function(t){console.log(t.data),e.$set(e.data.master.model,"meisai",t.data)}).catch(function(e){return console.log(e)})})},masterCodeOverLap:function(e,t){var a=this;axios.get(R.ApiUrl().IsVehicleCodeOverLap([{key:"CompanyID",value:this.data.companyID},{key:"VehicleID",value:e.Vehicle.VehicleID},{key:"VehicleCode",value:e.Vehicle.VehicleCode}])).then(function(i){if(i.data)alert("入力されたコードは既に存在します"),e.Vehicle.VehicleCode="";else for(var s=0;s<a.data.master.model.meisai.length;s++)a.data.master.model.meisai[s].Vehicle.VehicleCode==e.Vehicle.VehicleCode&&t!=s&&2!=a.data.master.model.meisai[s].Crud&&(alert("入力されたコードは既に存在します"),e.Vehicle.VehicleCode="")}).catch(function(e){return console.log(e)}),this.changeCrud(e,1)},getVehicles:function(){var e=this;axios.get(R.ApiUrl().GetVehiclesMaster([{key:"CompanyID",value:this.data.companyID}])).then(function(t){e.$set(e.data.master.model,"meisai",t.data)}).catch(function(e){return console.log(e)})},createMeisaiData:function(e,t,a,i){return{Vehicle:{VehicleID:e,VehicleCode:t,VehicleName:a,CompanyID:this.data.companyID,EditorID:this.data.editorID},Crud:i}},addMeisai:function(e,t,a,i){var s=this.createMeisaiData(e,t,a,i);this.data.master.model.meisai.push(s),console.log(this.data.master.model.meisai)},removeMeisai:function(e,t){3==e.Crud?this.data.master.model.meisai.splice(t,1):this.$set(e,"Crud",2)},changeCrud:function(e,t){3!=e.Crud&&this.$set(e,"Crud",t)},changeEditorID:function(e){for(var t in e)0!=e[t].Crud&&(e[t].Vehicle.EditorID=this.data.editorID)},submit:function(){var e=this;this.$refs["masterForm"].validate(function(t){t&&(e.changeEditorID(e.data.master.model.meisai),e.data.disabled.save=!0,axios.post(R.ApiUrl().VehiclesMasterSave(),e.data.master.model.meisai).then(function(t){t.data?(e.$message({message:"登録に成功しました",type:"success"}),e.getVehicles()):e.$message({message:"登録に失敗しました",type:"error"}),e.data.disabled.save=!1}).catch(function(t){e.$message({message:"通信に失敗しました",type:"error"}),e.data.disabled.save=!1}))})}},created:function(){this.data.companyID=this.$store.state.login.companyID,this.data.editorID=this.$store.state.login.userID,this.getVehicles()},mounted:function(){},watch:{}},J=P,z=Object(d["a"])(J,K,T,!1,null,null,null),B=z.exports,Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("疾病マスタ")])]),a("div",{attrs:{slot:"default"},slot:"default"},[a("el-form",{ref:"searchForm",attrs:{model:e.data.search.model,rules:e.data.search.validation,"label-width":"120px"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-3"},[a("label",{staticClass:"col-form-label px-1",staticStyle:{width:"100%"},attrs:{for:"疾病検索"}},[e._v("疾病名")]),a("el-form-item",{attrs:{"label-width":"0",prop:"syoriKubun"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"text"},model:{value:e.data.search.model.Name,callback:function(t){e.$set(e.data.search.model,"Name",t)},expression:"data.search.model.Name"}})],1)],1),a("div",{staticClass:"col-3"},[a("label",{staticClass:"col-form-label px-1",staticStyle:{width:"100%"},attrs:{for:""}},[e._v("検索")]),a("el-button",{staticStyle:{"margin-left":"2%"},attrs:{type:"warning",icon:"el-icon-search"},on:{click:e.searchName}},[e._v("検索")])],1)])]),a("div",{staticClass:"row",staticStyle:{"margin-top":"4%"}},[a("div",{staticClass:"col-12"},[a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{staticStyle:{"margin-left":"2%",width:"10%"},attrs:{type:"danger",disabled:e.data.disabled.save},on:{click:e.submit}},[e._v("保存")])],1),a("el-form",{ref:"masterForm",attrs:{model:e.data.master.model,rules:e.data.master.validation,"label-width":"120px"}},[a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticStyle:{width:"40%",display:"inline"},attrs:{type:"primary",disabled:e.data.disabled.save},on:{click:function(t){e.addMeisai(e.data.newID,"","","",3)}}},[e._v("明細を追加")])],1),a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th"),a("th",[e._v("\n                                        疾病コード\n                                    ")]),a("th",[e._v("\n                                        疾病名\n                                    ")]),a("th",[e._v("\n                                        備考記載必要性有無\n                                    ")])])]),e._l(e.data.master.model.meisai,function(t,i){return 2!=t.Crud?a("tr",[a("td",[a("el-button",{attrs:{type:"primary",name:"name",disabled:e.data.disabled.save},on:{click:function(a){e.removeMeisai(t,i)}}},[e._v("削除")])],1),a("td",[a("el-form-item",{attrs:{"label-width":"0",prop:"meisai["+i+"].Disease.DiseaseCode",rules:{required:!0,message:"疾病コードが入力されていません",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",disabled:e.data.disabled.save},on:{change:function(a){e.masterCodeOverLap(t,i)}},model:{value:t.Disease.DiseaseCode,callback:function(a){e.$set(t.Disease,"DiseaseCode",a)},expression:"meisai_data.Disease.DiseaseCode"}})],1)],1),a("td",[a("el-form-item",{attrs:{"label-width":"0",prop:"meisai["+i+"].Disease.DiseaseName",rules:{required:!0,message:"疾病名が入力されていません",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",disabled:e.data.disabled.save},on:{change:function(a){e.changeCrud(t,1)}},model:{value:t.Disease.DiseaseName,callback:function(a){e.$set(t.Disease,"DiseaseName",a)},expression:"meisai_data.Disease.DiseaseName"}})],1)],1),a("td",[a("el-form-item",{attrs:{"label-width":"0",prop:"meisai["+i+"].Disease.NoteFlag",rules:{required:!0,message:"備考記載必要性有無が選択されていません",trigger:"blur"}}},[a("el-select",{attrs:{name:"name",disabled:e.data.disabled.save},on:{change:function(a){e.changeCrud(t,1)}},model:{value:t.Disease.NoteFlag,callback:function(a){e.$set(t.Disease,"NoteFlag",a)},expression:"meisai_data.Disease.NoteFlag"}},[a("el-option",{attrs:{value:!1,label:"なし"}}),a("el-option",{attrs:{value:!0,label:"あり"}})],1)],1)],1)]):e._e()})],2),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticStyle:{width:"40%",display:"inline"},attrs:{type:"primary",disabled:e.data.disabled.save},on:{click:function(t){e.addMeisai(e.data.newID,"","","",3)}}},[e._v("明細を追加")])],1)]),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{staticStyle:{"margin-left":"2%",width:"10%"},attrs:{type:"danger",disabled:e.data.disabled.save},on:{click:e.submit}},[e._v("保存")])],1)],1)])],1)])],1)},H=[],Z={name:"niukeSyukei",components:{Card:L},data:function(){return{data:{companyID:"",newID:-1,search:{model:{memberName:""},validation:{Name:[{required:!0,message:"疾病名が入力されていません",trigger:"blur"}]}},master:{model:{meisai:[]}},disabled:{save:!1}}}},methods:{searchName:function(){var e=this;this.$refs["searchForm"].validate(function(t){t&&axios.get(R.ApiUrl().DiseaseSearch([{key:"CompanyID",value:e.data.companyID},{key:"Name",value:e.data.search.model.Name}])).then(function(t){console.log(t.data),e.$set(e.data.master.model,"meisai",t.data)}).catch(function(e){return console.log(e)})})},masterCodeOverLap:function(e,t){var a=this;console.log(R.ApiUrl().IsDiseaseCodeOverLap([{key:"CompanyID",value:this.data.companyID},{key:"DiseaseID",value:e.Disease.DiseaseID},{key:"DiseaseCode",value:e.Disease.DiseaseCode}])),axios.get(R.ApiUrl().IsDiseaseCodeOverLap([{key:"CompanyID",value:this.data.companyID},{key:"DiseaseID",value:e.Disease.DiseaseID},{key:"DiseaseCode",value:e.Disease.DiseaseCode}])).then(function(i){if(i.data)alert("入力されたコードは既に存在します"),e.Disease.DiseaseCode="";else for(var s=0;s<a.data.master.model.meisai.length;s++)a.data.master.model.meisai[s].Disease.DiseaseCode==e.Disease.DiseaseCode&&t!=s&&2!=a.data.master.model.meisai[s].Crud&&(alert("入力されたコードは既に存在します"),e.Disease.DiseaseCode="")}).catch(function(e){return console.log(e)}),this.changeCrud(e,1)},getDiseases:function(){var e=this;axios.get(R.ApiUrl().GetDiseasesMaster([{key:"CompanyID",value:this.data.companyID}])).then(function(t){e.$set(e.data.master.model,"meisai",t.data)}).catch(function(e){return console.log(e)})},createMeisaiData:function(e,t,a,i,s){return{Disease:{DiseaseID:e,DiseaseCode:t,DiseaseName:a,NoteFlag:i,CompanyID:this.data.companyID,EditorID:this.data.editorID},Crud:s}},addMeisai:function(e,t,a,i,s){var l=this.createMeisaiData(e,t,a,i,s);this.data.master.model.meisai.push(l),console.log(this.data.master.model.meisai)},removeMeisai:function(e,t){3==e.Crud?this.data.master.model.meisai.splice(t,1):this.$set(e,"Crud",2)},changeCrud:function(e,t){3!=e.Crud&&this.$set(e,"Crud",t)},changeEditorID:function(e){for(var t in e)0!=e[t].Crud&&(e[t].Disease.EditorID=this.data.editorID)},submit:function(){var e=this;this.$refs["masterForm"].validate(function(t){t&&(e.changeEditorID(e.data.master.model.meisai),e.data.disabled.save=!0,axios.post(R.ApiUrl().DiseasesMasterSave(),e.data.master.model.meisai).then(function(t){t.data?(e.$message({message:"登録に成功しました",type:"success"}),e.getDiseases()):e.$message({message:"登録に失敗しました",type:"error"}),e.data.disabled.save=!1}).catch(function(t){e.$message({message:"通信に失敗しました",type:"error"}),e.data.disabled.save=!1}))})}},created:function(){this.data.companyID=this.$store.state.login.companyID,this.data.editorID=this.$store.state.login.userID,this.getDiseases()},mounted:function(){},watch:{}},Q=Z,W=Object(d["a"])(Q,Y,H,!1,null,null,null),X=W.exports,ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("指示事項マスタ")])]),a("div",{attrs:{slot:"default"},slot:"default"},[a("el-form",{ref:"searchForm",attrs:{model:e.data.search.model,rules:e.data.search.validation,"label-width":"120px"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-3"},[a("label",{staticClass:"col-form-label px-1",staticStyle:{width:"100%"},attrs:{for:"指示事項検索"}},[e._v("指示事項名")]),a("el-form-item",{attrs:{"label-width":"0",prop:"syoriKubun"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"text"},model:{value:e.data.search.model.Name,callback:function(t){e.$set(e.data.search.model,"Name",t)},expression:"data.search.model.Name"}})],1)],1),a("div",{staticClass:"col-3"},[a("label",{staticClass:"col-form-label px-1",staticStyle:{width:"100%"},attrs:{for:""}},[e._v("検索")]),a("el-button",{staticStyle:{"margin-left":"2%"},attrs:{type:"warning",icon:"el-icon-search"},on:{click:e.searchName}},[e._v("検索")])],1)])]),a("div",{staticClass:"row",staticStyle:{"margin-top":"4%"}},[a("div",{staticClass:"col-12"},[a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{staticStyle:{"margin-left":"2%",width:"10%"},attrs:{type:"danger",disabled:e.data.disabled.save},on:{click:e.submit}},[e._v("保存")])],1),a("el-form",{ref:"masterForm",attrs:{model:e.data.master.model,rules:e.data.master.validation,"label-width":"120px"}},[a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticStyle:{width:"40%",display:"inline"},attrs:{type:"primary",disabled:e.data.disabled.save},on:{click:function(t){e.addMeisai(e.data.newID,"","",3)}}},[e._v("明細を追加")])],1),a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th"),a("th",[e._v("\n                                        指示事項コード\n                                    ")]),a("th",[e._v("\n                                        指示事項名\n                                    ")])])]),e._l(e.data.master.model.meisai,function(t,i){return 2!=t.Crud?a("tr",[a("td",[a("el-button",{attrs:{type:"primary",name:"name",disabled:e.data.disabled.save},on:{click:function(a){e.removeMeisai(t,i)}}},[e._v("削除")])],1),a("td",[a("el-form-item",{attrs:{"label-width":"0",prop:"meisai["+i+"].Instruction.InstructionCode",rules:{required:!0,message:"指示事項コードが入力されていません",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",disabled:e.data.disabled.save},on:{change:function(a){e.masterCodeOverLap(t,i)}},model:{value:t.Instruction.InstructionCode,callback:function(a){e.$set(t.Instruction,"InstructionCode",a)},expression:"meisai_data.Instruction.InstructionCode"}})],1)],1),a("td",[a("el-form-item",{attrs:{"label-width":"0",prop:"meisai["+i+"].Instruction.InstructionName",rules:{required:!0,message:"指示事項名が入力されていません",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",disabled:e.data.disabled.save},on:{change:function(a){e.changeCrud(t,1)}},model:{value:t.Instruction.InstructionName,callback:function(a){e.$set(t.Instruction,"InstructionName",a)},expression:"meisai_data.Instruction.InstructionName"}})],1)],1)]):e._e()})],2),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticStyle:{width:"40%",display:"inline"},attrs:{type:"primary",disabled:e.data.disabled.save},on:{click:function(t){e.addMeisai(e.data.newID,"","",3)}}},[e._v("明細を追加")])],1)]),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{staticStyle:{"margin-left":"2%",width:"10%"},attrs:{type:"danger",disabled:e.data.disabled.save},on:{click:e.submit}},[e._v("保存")])],1)],1)])],1)])],1)},te=[],ae={name:"niukeSyukei",components:{Card:L},data:function(){return{data:{companyID:"",newID:-1,search:{model:{memberName:""},validation:{Name:[{required:!0,message:"指示事項名が入力されていません",trigger:"blur"}]}},master:{model:{meisai:[]}},disabled:{save:!1}}}},methods:{searchName:function(){var e=this;this.$refs["searchForm"].validate(function(t){t&&axios.get(R.ApiUrl().InstructionSearch([{key:"CompanyID",value:e.data.companyID},{key:"Name",value:e.data.search.model.Name}])).then(function(t){console.log(t.data),e.$set(e.data.master.model,"meisai",t.data)}).catch(function(e){return console.log(e)})})},masterCodeOverLap:function(e,t){var a=this;axios.get(R.ApiUrl().IsInstructionCodeOverLap([{key:"CompanyID",value:this.data.companyID},{key:"InstructionID",value:e.Instruction.InstructionID},{key:"InstructionCode",value:e.Instruction.InstructionCode}])).then(function(i){if(i.data)alert("入力されたコードは既に存在します"),e.Instruction.InstructionCode="";else for(var s=0;s<a.data.master.model.meisai.length;s++)a.data.master.model.meisai[s].Instruction.InstructionCode==e.Instruction.InstructionCode&&t!=s&&2!=a.data.master.model.meisai[s].Crud&&(alert("入力されたコードは既に存在します"),e.Instruction.InstructionCode="")}).catch(function(e){return console.log(e)}),this.changeCrud(e,1)},getInstructions:function(){var e=this;axios.get(R.ApiUrl().GetInstructionsMaster([{key:"CompanyID",value:this.data.companyID}])).then(function(t){e.$set(e.data.master.model,"meisai",t.data)}).catch(function(e){return console.log(e)})},createMeisaiData:function(e,t,a,i){return{Instruction:{InstructionID:e,InstructionCode:t,InstructionName:a,CompanyID:this.data.companyID,EditorID:this.data.editorID},Crud:i}},addMeisai:function(e,t,a,i){var s=this.createMeisaiData(e,t,a,i);this.data.master.model.meisai.push(s),console.log(this.data.master.model.meisai)},removeMeisai:function(e,t){3==e.Crud?this.data.master.model.meisai.splice(t,1):this.$set(e,"Crud",2)},changeCrud:function(e,t){3!=e.Crud&&this.$set(e,"Crud",t)},changeEditorID:function(e){for(var t in e)0!=e[t].Crud&&(e[t].Instruction.EditorID=this.data.editorID)},submit:function(){var e=this;this.$refs["masterForm"].validate(function(t){t&&(e.changeEditorID(e.data.master.model.meisai),e.data.disabled.save=!0,axios.post(R.ApiUrl().InstructionsMasterSave(),e.data.master.model.meisai).then(function(t){t.data?(e.$message({message:"登録に成功しました",type:"success"}),e.getInstructions()):e.$message({message:"登録に失敗しました",type:"error"}),e.data.disabled.save=!1}).catch(function(t){e.$message({message:"通信に失敗しました",type:"error"}),e.data.disabled.save=!1}))})}},created:function(){this.data.companyID=this.$store.state.login.companyID,this.data.editorID=this.$store.state.login.userID,this.getInstructions()},mounted:function(){},watch:{}},ie=ae,se=Object(d["a"])(ie,ee,te,!1,null,null,null),le=se.exports,re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("アラート設定マスタ")])]),a("div",{attrs:{slot:"default"},slot:"default"},[a("div",{staticClass:"row",staticStyle:{"margin-top":"4%"}},[a("div",{staticClass:"col-12"},[a("el-form",{ref:"masterForm",attrs:{model:e.data.master.model,rules:e.data.master.validation,"label-width":"120px"}},[a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[e._v("\n                                        アラート設定種類\n                                    ")]),a("th",[e._v("\n                                        アラート色\n                                    ")]),a("th",[e._v("\n                                        アラート表示時間間隔\n                                    ")])])]),e._l(e.data.master.model.meisai,function(t,i){return 2!=t.Crud?a("tr",[a("td",[e._v("\n                                    "+e._s(e.getAlertKindName(t.AlertSetting.AlertKind))+"\n                                ")]),a("td",[a("el-form-item",{attrs:{"label-width":"0",prop:"meisai["+i+"].AlertSetting.AlertColor",rules:{required:!0,message:"アラート色が入力されていません",trigger:"blur"}}},[a("el-color-picker",{staticStyle:{width:"100%"},attrs:{disabled:e.data.disabled.save},on:{change:function(a){e.changeCrud(t,1)}},model:{value:t.AlertSetting.AlertColor,callback:function(a){e.$set(t.AlertSetting,"AlertColor",a)},expression:"meisai_data.AlertSetting.AlertColor"}})],1)],1),a("td",[2!=t.AlertSetting.AlertKind?a("el-form-item",{attrs:{"label-width":"0",prop:"meisai["+i+"].AlertSetting.AlertInterval",rules:{required:!0,message:"アラート表示時間間隔が入力されていません",trigger:"blur"}}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{type:"text",min:0,"controls-position":"right",disabled:e.data.disabled.save},on:{change:function(a){e.changeCrud(t,1)}},model:{value:t.AlertSetting.AlertInterval,callback:function(a){e.$set(t.AlertSetting,"AlertInterval",a)},expression:"meisai_data.AlertSetting.AlertInterval"}})],1):e._e()],1)]):e._e()})],2)]),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{staticStyle:{"margin-left":"2%",width:"10%"},attrs:{type:"danger",disabled:e.data.disabled.save},on:{click:e.submit}},[e._v("保存")])],1)],1)])])])],1)},ne=[],oe={name:"niukeSyukei",components:{Card:L},data:function(){return{data:{companyID:"",newID:-1,search:{model:{memberName:""},validation:{Name:[{required:!0,message:"アラート設定名が入力されていません",trigger:"blur"}]}},master:{model:{meisai:[]}},disabled:{save:!1}}}},methods:{getAlertKindName:function(e){return 0==e?"点呼間隔":1==e?"休憩間点呼":2==e?"両方当てはまる場合":void 0},getAlertSettings:function(){var e=this;axios.get(R.ApiUrl().GetAlertSettingsMaster([{key:"CompanyID",value:this.data.companyID}])).then(function(t){e.$set(e.data.master.model,"meisai",t.data)}).catch(function(e){return console.log(e)})},changeCrud:function(e,t){3!=e.Crud&&this.$set(e,"Crud",t)},changeEditorID:function(e){for(var t in e)0!=e[t].Crud&&(e[t].AlertSetting.EditorID=this.data.editorID)},submit:function(){var e=this;this.$refs["masterForm"].validate(function(t){t&&(e.changeEditorID(e.data.master.model.meisai),e.data.disabled.save=!0,axios.post(R.ApiUrl().AlertSettingsMasterSave(),e.data.master.model.meisai).then(function(t){t.data?(e.$message({message:"登録に成功しました",type:"success"}),e.getAlertSettings()):e.$message({message:"登録に失敗しました",type:"error"}),e.data.disabled.save=!1}).catch(function(t){e.$message({message:"通信に失敗しました",type:"error"}),e.data.disabled.save=!1}))})}},created:function(){this.data.companyID=this.$store.state.login.companyID,this.data.editorID=this.$store.state.login.userID,this.getAlertSettings()},mounted:function(){},watch:{}},ce=oe,de=Object(d["a"])(ce,re,ne,!1,null,null,null),ue=de.exports,me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("点呼状況")])]),a("div",{attrs:{slot:"default"},slot:"default"},[a("el-form",{ref:"searchForm",attrs:{model:e.data.search.model,rules:e.data.search.validation,"label-width":"120px"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("label",{staticClass:"col-form-label px-1",staticStyle:{width:"100%"},attrs:{for:"運行日"}},[e._v("運行日")]),a("el-form-item",{attrs:{"label-width":"0",prop:"ServiceDate"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"date"},on:{change:function(t){e.serviceLogSearch()}},model:{value:e.data.search.model.ServiceDate,callback:function(t){e.$set(e.data.search.model,"ServiceDate",t)},expression:"data.search.model.ServiceDate"}})],1)],1),a("div",{staticClass:"col-3"},[a("label",{staticClass:"col-form-label px-1",staticStyle:{width:"100%"},attrs:{for:"運行形態選択"}},[e._v("運行形態選択")]),a("el-form-item",{attrs:{"label-width":"0",prop:"IsLongDistance"}},[a("el-select",{attrs:{name:"name",placeholder:"選択してください"},on:{change:function(t){e.changeVisibilityIsLongDistance()}},model:{value:e.data.search.model.IsLongDistance,callback:function(t){e.$set(e.data.search.model,"IsLongDistance",t)},expression:"data.search.model.IsLongDistance"}},[a("el-option",{attrs:{value:null,label:"選択しない"}}),a("el-option",{attrs:{value:!0,label:"長距離"}}),a("el-option",{attrs:{value:!1,label:"地場"}})],1)],1)],1),a("div",{staticClass:"col-3"},[a("el-button",{staticStyle:{"margin-top":"13%",width:"80%"},attrs:{type:"primary"},on:{click:function(t){e.sendEmail()}}},[e._v("更新")])],1)]),a("div",{staticClass:"row",staticStyle:{"margin-top":"2%"}},[a("div",{staticClass:"col-md-3"},[a("label",{staticClass:"col-form-label px-1",staticStyle:{width:"100%"},attrs:{for:"アラートのみ"}}),a("el-checkbox",{staticStyle:{"margin-left":"5%"},on:{change:function(t){e.changeVisibilityIsAlert()}},model:{value:e.data.search.model.IsAlert,callback:function(t){e.$set(e.data.search.model,"IsAlert",t)},expression:"data.search.model.IsAlert"}},[e._v("アラートのみ")])],1),a("div",{staticClass:"col-md-3"},[a("label",{staticClass:"col-form-label px-1",staticStyle:{width:"100%"},attrs:{for:"社員検索"}},[e._v("社員名検索")]),a("el-form-item",{attrs:{"label-width":"0",prop:"syoriKubun"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"text"},on:{change:function(t){e.changeVisibilityMemberName()}},model:{value:e.data.search.model.memberName,callback:function(t){e.$set(e.data.search.model,"memberName",t)},expression:"data.search.model.memberName"}})],1)],1),a("div",{staticClass:"col-md-2"},[a("label",{staticClass:"col-form-label px-1",staticStyle:{width:"100%"},attrs:{for:"社員検索"}},[e._v("運行追加")]),a("el-button",{attrs:{type:"warning"},on:{click:function(t){e.addServiceLogAllDrivers()}}},[e._v("全社員分追加")])],1),a("div",{staticClass:"col-md-3"},[a("label",{staticClass:"col-form-label px-1",staticStyle:{width:"100%"},attrs:{for:"社員検索"}},[e._v("社員を指定して追加")]),a("el-select",{staticStyle:{"margin-right":"2%"},attrs:{name:"name",multiple:""},model:{value:e.data.search.model.selectedDrivers,callback:function(t){e.$set(e.data.search.model,"selectedDrivers",t)},expression:"data.search.model.selectedDrivers"}},e._l(e.data.drivers,function(e){return a("el-option",{attrs:{value:e.MemberID,label:e.MemberName}})})),a("el-button",{attrs:{type:"warning"},on:{click:function(t){e.addServiceLogBySelectedDrivers()}}},[e._v("運行を追加")])],1)]),a("div",{staticClass:"row",staticStyle:{"margin-top":"2%"}},[a("div",{staticClass:"col-md-3"},[a("el-radio",{staticStyle:{"margin-left":"5%"},attrs:{label:"decided"},on:{change:function(t){e.changeVisibilityDestination()}},model:{value:e.data.search.model.NarrowDestination,callback:function(t){e.$set(e.data.search.model,"NarrowDestination",t)},expression:"data.search.model.NarrowDestination"}},[e._v("行先決定済みのみ")])],1),a("div",{staticClass:"col-md-3"},[a("el-radio",{staticStyle:{"margin-left":"5%"},attrs:{label:"unDecided"},on:{change:function(t){e.changeVisibilityDestination()}},model:{value:e.data.search.model.NarrowDestination,callback:function(t){e.$set(e.data.search.model,"NarrowDestination",t)},expression:"data.search.model.NarrowDestination"}},[e._v("行先未決定のみ")])],1),a("div",{staticClass:"col-md-3"},[a("el-radio",{staticStyle:{"margin-left":"5%"},attrs:{label:"all"},on:{change:function(t){e.changeVisibilityDestination()}},model:{value:e.data.search.model.NarrowDestination,callback:function(t){e.$set(e.data.search.model,"NarrowDestination",t)},expression:"data.search.model.NarrowDestination"}},[e._v("すべて")])],1)]),a("div",{staticClass:"row",staticStyle:{"margin-top":"2%"}},[a("div",{staticClass:"col-md-9"}),a("div",{staticClass:"col-md-3"},[a("el-button",{staticStyle:{"margin-top":"13%",width:"80%"},attrs:{type:"danger"},on:{click:function(t){e.save()}}},[e._v("変更を保存")])],1)])]),a("div",{staticClass:"row",staticStyle:{"margin-top":"4%"}},[a("div",{staticClass:"col-12"},[a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[e._v("\n                                    社員名\n                                ")]),a("th",[e._v("\n                                    行先\n                                ")]),a("th",[e._v("\n                                    乗務前点呼時間\n                                ")]),a("th",[e._v("\n                                    最終電話点呼時間\n                                ")]),a("th",[e._v("\n                                    乗務後点呼時間\n                                ")]),a("th",[e._v("\n                                    点呼内容を表示\n                                ")]),a("th",[e._v("\n                                    運行を削除\n                                ")])])]),e._l(e.data.meisai,function(t){return e.judgeDisplayServiceLog(t.Visibility)?a("tbody",{key:t.index,staticStyle:{"border-bottom":"solid 0.5px #d3d3d3"}},[a("tr",{style:e.getAlertColor(t)},[a("td",[e._v("\n                                    "+e._s(t.ServiceLog.MemberName)+"\n                                ")]),a("td",{staticStyle:{width:"20%"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{name:"name",disabled:t.IsDelete},on:{change:function(e){t.IsEdit=!0}},model:{value:t.ServiceLog.DestinationID,callback:function(a){e.$set(t.ServiceLog,"DestinationID",a)},expression:"meisai_data.ServiceLog.DestinationID"}},e._l(e.data.destinations,function(e){return a("el-option",{attrs:{value:e.DestinationID,label:e.DestinationName}})}))],1),a("td",[e._v("\n                                    "+e._s(t.ServiceLog.BeforDrivingRollCallTime)+"\n                                ")]),a("td",[e._v("\n                                    "+e._s(t.ServiceLog.LastRollCallTime)+"\n                                ")]),a("td",[e._v("\n                                    "+e._s(t.ServiceLog.AfterDrivingRollCallTime)+"\n                                ")]),a("td",{staticStyle:{width:"10%"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"success",disabled:-1==t.ServiceLog.ServiceLogID},on:{click:function(a){e.moveRollCallInput(t)}}},[e._v("点呼内容表示")])],1),a("td",{staticStyle:{width:"10%"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(a){e.$set(t,"IsDelete",!t.IsDelete)}}},[e._v(e._s(t.IsDelete?"復帰":"削除"))])],1)])]):e._e()})],2)])])],1)])],1)},he=[],ve=(a("0d6d"),Object.freeze({KEY_CODES:Object.freeze({F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123}),PRODUCT_CODE_HOSHIGAKI:0,PRODUCT_CODE_AMPO:1,VARIETIES_CODE_SANJA:1,VARIETIES_CODE_HIRATANENASHI:2,SOCKET_SERVER_ADRESS_LOCAL:"192.168.111.23:8080",SOCKET_SERVER_ADRESS_DEVELOPMENT:"104.41.175.3:8080",SOCKET_SERVER_ADRESS_PRODUCTION:""}),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-autocomplete",{staticStyle:{width:"30%","margin-right":"2%"},attrs:{"fetch-suggestions":e.querySearch,placeholder:e.placeholder,disabled:e.disabled,autofocus:e.autofocus},on:{select:e.autocompleteSelect,change:e.autocompleteChange},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[a("div",{staticStyle:{"border-top":"solid 0.5px lightgray"}},[e._v("コード:"+e._s(i.value))]),e._l(e.display,function(t){return a("div",[e._v(e._s(t.name)+":"+e._s(i[t.key]))])}),a("div")]}}]),model:{value:e.data.code,callback:function(t){e.$set(e.data,"code",t)},expression:"data.code"}})}),ge=[],pe={createSearchFilter:function(e,t){return function(a){return 0===a[t].toLowerCase().indexOf(e.toLowerCase())}}},fe={is_exsist_by_key:function(e,t){var a,i,s=!1;for(var l in t)l==e&&(s=!0,i=l);return s&&(a=t[i]),a},is_exsist_by_object_value:function(e,t,a){var i,s,l=!1;for(var r in t)l||t[r][a]==e&&(l=!0,s=r);return l&&(i=t[s]),i}},be=(a("c5f6"),{createValueKey:function(e,t,a){for(var i in e)e[i].value="string"==a?String(e[i][t]):"int"==a?Number(e[i][t]):e[i][t]}}),De={name:"el-increment-search",model:{prop:"code",event:"change"},props:{code:{type:String},autoComplete:{type:Array},display:{type:Array},required:{type:Boolean},kind:{type:String},disabled:{type:Boolean},autofocus:{type:Boolean}},data:function(){return{data:{code:null},autoCompleteData:{},querySearchData:[],placeholder:null,message:{error:""}}},methods:{querySearch:function(e,t){var a=this.querySearchData,i=e?a.filter(pe.createSearchFilter(e,"value")):a;t(i)},autocompleteSelect:function(e){for(var t in this.autoComplete)this.autoCompleteData[this.autoComplete[t]]=e[this.autoComplete[t]];this.$emit("change",e.value),this.$emit("update",this.autoCompleteData)},autocompleteChange:function(e){if(""==e){for(var t in this.autoComplete)this.autoCompleteData[this.autoComplete[t]]="";return this.$emit("change",""),this.$emit("update",this.autoCompleteData),!1}var a=fe.is_exsist_by_object_value(e,this.querySearchData,"value");if(!a){if(this.required){for(var t in alert(this.message.error),this.autoComplete)this.autoCompleteData[this.autoComplete[t]]="";this.$emit("change",""),this.$emit("update",this.autoCompleteData)}return!1}for(var t in this.autoComplete)this.autoCompleteData[this.autoComplete[t]]=a[this.autoComplete[t]];this.$emit("change",e),this.$emit("update",this.autoCompleteData)},createValueKey:function(e,t){for(var a in e)e[a].value=String(e[a][t])}},created:function(){var e=this;if("商品"==this.kind&&(this.placeholder="商品コード",this.message.error="入力したコードの商品は存在しません",axios.get(R.syouhinMaster).then(function(t){be.createValueKey(t.data,"syohinCD","string"),e.querySearchData=t.data,console.log(e.querySearchData)}).catch(function(e){return console.log(e)})),"生産者"==this.kind&&(this.placeholder="生産者コード",this.message.error="入力したコードの生産者は存在しません",axios.get(R.seisansyaMaster).then(function(t){be.createValueKey(t.data,"seisansyacd","string"),e.querySearchData=t.data}).catch(function(e){return console.log(e)})),"品種"==this.kind){this.placeholder="品種コード",this.message.error="入力したコードの品種は存在しません";var t=[{code:"0",name:"三社"},{code:"1",name:"平核"}];this.createValueKey(t,"code"),this.querySearchData=t}if("等級"==this.kind){this.placeholder="等級コード",this.message.error="入力したコードの等級は存在しません";t=[{code:"0",name:"上"},{code:"99",name:"特上"},{code:"2",name:"中"},{code:"3",name:"下"},{code:"4",name:"特下"}];this.createValueKey(t,"code"),this.querySearchData=t}if("支所"==this.kind&&(this.placeholder="支所コード",this.message.error="入力したコードの支所は存在しません",axios.get(R.shisyoMaster).then(function(t){be.createValueKey(t.data,"shisyoCD","string"),e.querySearchData=t.data,e.data.code=e.code,""!=e.code&&e.autocompleteChange(e.data.code)}).catch(function(e){return console.log(e)})),"サイズ"==this.kind){this.placeholder="サイズコード",this.message.error="入力したコードのサイズは存在しません";t=[{code:"0",name:"S"},{code:"1",name:"L"},{code:"2",name:"M"}];this.createValueKey(t,"code"),this.querySearchData=t}"市場"==this.kind&&(this.placeholder="市場コード",this.message.error="入力したコードの市場は存在しません",axios.get(R.shijoMaster).then(function(t){be.createValueKey(t.data,"shijyoCD","string"),e.querySearchData=t.data}).catch(function(e){return console.log(e)})),"部門"==this.kind&&(this.placeholder="部門コード",this.message.error="入力したコードの部門は存在しません",axios.get(R.bumonMaster).then(function(t){be.createValueKey(t.data,"bumoncd","string"),e.querySearchData=t.data}).catch(function(e){return console.log(e)})),"包装"==this.kind&&(this.placeholder="包装コード",this.message.error="入力したコードの包装は存在しません",axios.get(R.hosoMaster).then(function(t){be.createValueKey(t.data,"hosoCD","string"),e.querySearchData=t.data,e.data.code=e.code,""!=e.code&&e.autocompleteChange(e.data.code)}).catch(function(e){return console.log(e)})),"地区"==this.kind&&(this.placeholder="地区コード",this.message.error="入力したコードの地区は存在しません",axios.get(R.chikuMaster).then(function(t){be.createValueKey(t.data,"chikuCD","string"),e.querySearchData=t.data,e.data.code=e.code,""!=e.code&&e.autocompleteChange(e.data.code)}).catch(function(e){return console.log(e)})),"資材"==this.kind&&(this.placeholder="資材コード",this.message.error="入力したコードの資材は存在しません",axios.get(R.shizaiMaster).then(function(t){be.createValueKey(t.data,"shizaiCD","string"),e.querySearchData=t.data,e.data.code=e.code,console.log(e.querySearchData),""!=e.code&&e.autocompleteChange(e.data.code)}).catch(function(e){return console.log(e)})),"運賃"==this.kind&&(this.placeholder="運賃コード",this.message.error="入力したコードの運賃は存在しません",axios.get(R.unchinMaster).then(function(t){be.createValueKey(t.data,"unchinCD","string"),e.querySearchData=t.data,console.log(e.querySearchData)}).catch(function(e){return console.log(e)}))},mounted:function(){},watch:{code:function(){this.data.code=this.code}}},ye=De,Ie=Object(d["a"])(ye,ve,ge,!1,null,"2dc24151",null),Ce=Ie.exports,Se={name:"niukeSyukei",components:{Card:L,ElIncrementSearch:Ce},data:function(){return{data:{search:{model:{memberName:"",ServiceDate:"",IsLongDistance:"",IsAlert:!1,NarrowDestination:"all",selectedDrivers:[]},validation:{memberName:[{required:!0,message:"社員名が入力されていません",trigger:"blur"}]}},AlertColor:{0:"",1:"",2:""},drivers:[],destinations:[],meisai:[],isSave:!1}}},methods:{moveRollCallInput:function(e){window.confirm("変更が保存されませんがよろしいですか？")&&(this.$store.commit("changeMoveRollCallLogInput",{ServiceDate:e.ServiceLog.ServiceDate,MemberID:e.ServiceLog.DriverID}),this.$router.push("/uedaunyu/rollCallLogInput"))},getAlertColor:function(e){var t=e.AlertKind;return e.IsDelete?"background-color:#a9a9a9;":0==t||1==t||2==t?"background-color:"+this.data.AlertColor[t]+";":""},getDriversIndex:function(e){for(var t=0;t<this.data.drivers.length;t++)if(this.data.drivers[t].MemberID==e)return t},getDriver:function(e){return this.data.drivers[this.getDriversIndex(e)]},addServiceLogAllDrivers:function(){for(var e=0;e<this.data.drivers.length;e++){var t=this.data.drivers[e];console.log(t),this.addServiceLog(t.IsLongDistance,t.DestinationID,-1,t.MemberID,this.data.search.model.ServiceDate,t.MemberName,"","","")}},addServiceLogBySelectedDrivers:function(){for(var e=0;e<this.data.search.model.selectedDrivers.length;e++)for(var t=this.data.search.model.selectedDrivers[e],a=0;a<this.data.drivers.length;a++){var i=this.data.drivers[a];i.MemberID==t&&this.addServiceLog(i.IsLongDistance,i.DestinationID,-1,i.MemberID,this.data.search.model.ServiceDate,i.MemberName,"","","")}},addServiceLog:function(e,t,a,i,s,l,r,n,o){this.data.meisai.push(this.createServiceLog(e,t,a,i,s,l,r,n,o)),console.log(this.data.meisai)},createServiceLog:function(e,t,a,i,s,l,r,n,o){var c=this.createVisibilityObject();return{IsLongDistance:e,Visibility:c,IsDelete:!1,IsEdit:!1,AlertKind:null,ServiceLog:{DestinationID:t,CompanyID:this.data.companyID,EditorID:this.data.editorID,ServiceLogID:a,DriverID:i,ServiceDate:s,MemberName:l,BeforDrivingRollCallTime:r,LastRollCallTime:n,AfterDrivingRollCallTime:o}}},createVisibilityObject:function(){return{IsLongDistance:!0,MemberName:!0,IsAlert:!0,IsDecidedDestination:!0}},changeVisibilityIsLongDistance:function(){for(var e=this.data.search.model.IsLongDistance,t=0;t<this.data.meisai.length;t++)if(!this.data.meisai[t].IsDelete){var a=!0;null!=e&&this.data.meisai[t].IsLongDistance!=e&&(a=!1),this.data.meisai[t].Visibility.IsLongDistance=a}},changeVisibilityIsAlert:function(){for(var e=this.data.search.model.IsAlert,t=0;t<this.data.meisai.length;t++)if(!this.data.meisai[t].IsDelete){var a=!0;e&&null==this.data.meisai[t].AlertKind&&(a=!1),this.data.meisai[t].Visibility.IsAlert=a}},changeVisibilityMemberName:function(){for(var e=this.data.search.model.memberName,t=0;t<this.data.meisai.length;t++)if(!this.data.meisai[t].IsDelete){var a=!0;""!=e&&-1==this.data.meisai[t].ServiceLog.MemberName.indexOf(e)&&(a=!1),this.data.meisai[t].Visibility.MemberName=a}},changeVisibilityDestination:function(){for(var e=this.data.search.model.NarrowDestination,t=0;t<this.data.meisai.length;t++)if(!this.data.meisai[t].IsDelete){var a=!0;if("all"!=e){var i=this.data.meisai[t].ServiceLog.DestinationID;"unDecided"==e?null!=i&&(a=!1):"decided"==e&&null==i&&(a=!1)}this.data.meisai[t].Visibility.IsDecidedDestination=a}},judgeDisplayServiceLog:function(e){var t=!0;for(var a in e)e[a]||(t=!1);return t},serviceLogSearch:function(){var e=this;axios.get(R.ApiUrl().GetRollCallStatus([{key:"CompanyID",value:this.data.companyID},{key:"ServiceDate",value:this.data.search.model.ServiceDate}])).then(function(t){for(var a in console.log(t.data),e.$set(e.data,"meisai",t.data),e.data.meisai)e.$set(e.data.meisai[a],"Visibility",e.createVisibilityObject()),e.$set(e.data.meisai[a].ServiceLog,"MemberName",e.getDriver(e.data.meisai[a].ServiceLog.DriverID).MemberName);console.log(e.data.meisai)}).catch(function(e){})},save:function(){var e=this;this.data.isSave=!0,axios.put(R.ApiUrl().RollCallStatusSave(),this.data.meisai).then(function(t){console.log(t.data),t.data?(e.$message({message:"登録に成功しました",type:"success"}),e.serviceLogSearch()):e.$message({message:"登録に失敗しました",type:"error"}),e.data.isSave=!1}).catch(function(t){e.$message({message:"通信に失敗しました",type:"error"}),e.data.isSave=!1})},sendEmail:function(){var e=this;this.data.isSave=!0,axios.post(R.ApiUrl().RollCallStatusSendEmail(),this.data.meisai).then(function(t){console.log(t.data),t.data?(e.$message({message:"登録及び違反者へのメール送信に成功しました",type:"success"}),e.serviceLogSearch()):e.$message({message:"登録及び違反者へのメール送信に失敗しました",type:"error"}),e.data.isSave=!1}).catch(function(t){e.$message({message:"通信に失敗しました",type:"error"}),e.data.isSave=!1})}},created:function(){var e=this;this.data.companyID=this.$store.state.login.companyID,this.data.editorID=this.$store.state.login.userID,this.data.search.model.ServiceDate=f.nowJapanDateInput(),axios.get(R.ApiUrl().GetRollCallStatusMasterData([{key:"CompanyID",value:this.data.companyID}])).then(function(t){console.log(t.data.Drivers),e.$set(e.data,"drivers",t.data.Drivers),e.$set(e.data,"destinations",t.data.Destinations),e.$set(e.data,"AlertColor",t.data.AlertColor),e.serviceLogSearch()}).catch(function(e){return console.log(e)})},mounted:function(){},watch:{}},_e=Se,we=(a("0c4e"),Object(d["a"])(_e,me,he,!1,null,"7c66fa0f",null)),Me=we.exports,xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("点呼記録入力")])]),a("div",{attrs:{slot:"default"},slot:"default"},[a("el-form",{ref:"searchForm",attrs:{model:e.data.search.model,rules:e.data.search.validation,"label-width":"120px"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("label",{staticClass:"col-form-label px-1",staticStyle:{width:"100%"},attrs:{for:"運行日"}},[e._v("運行日：")]),a("el-form-item",{attrs:{"label-width":"0",prop:"ServiceDate"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"date"},model:{value:e.data.search.model.ServiceDate,callback:function(t){e.$set(e.data.search.model,"ServiceDate",t)},expression:"data.search.model.ServiceDate"}})],1)],1),a("div",{staticClass:"col-md-9",staticStyle:{"text-align":"right"}},[a("label",{staticClass:"col-form-label px-1",staticStyle:{width:"100%"}}),a("el-button",{staticStyle:{width:"40%"},attrs:{type:"warning"},on:{click:function(t){e.$router.push("/RollCallLogInput")}}},[e._v("戻る")])],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("label",{staticClass:"col-form-label px-1",staticStyle:{width:"100%"},attrs:{for:"運転手選択"}},[e._v("運転手選択：")]),a("el-form-item",{attrs:{"label-width":"0",prop:"MemberID"}},[a("el-select",{attrs:{name:"name"},model:{value:e.data.search.model.MemberID,callback:function(t){e.$set(e.data.search.model,"MemberID",t)},expression:"data.search.model.MemberID"}},e._l(e.data.drivers,function(e){return a("el-option",{attrs:{value:e.MemberID,label:e.MemberName}})}))],1)],1),a("div",{staticClass:"col-md-3"},[a("label",{staticClass:"col-form-label px-1",staticStyle:{width:"100%"}},[e._v("検索：")]),a("el-button",{staticStyle:{width:"40%"},attrs:{type:"success",icon:"el-icon-search",disabled:e.data.isSave},on:{click:function(t){e.search(!1)}}},[e._v("検索")])],1)]),a("div",{staticClass:"row",staticStyle:{"margin-top":"4%"}},[a("div",{staticClass:"col-md-3"},[a("label",{staticClass:"col-form-label px-1",staticStyle:{width:"100%"},attrs:{for:"選択中の運航日"}},[e._v("選択中の運航日：")]),a("el-input",{attrs:{readonly:""},model:{value:e.data.log.serviceDate,callback:function(t){e.$set(e.data.log,"serviceDate",t)},expression:"data.log.serviceDate"}})],1),a("div",{staticClass:"col-md-3"},[a("label",{staticClass:"col-form-label px-1",staticStyle:{width:"100%"},attrs:{for:"選択中の運転手"}},[e._v("選択中の運転手：")]),a("el-input",{attrs:{readonly:""},model:{value:e.data.log.driverName,callback:function(t){e.$set(e.data.log,"driverName",t)},expression:"data.log.driverName"}})],1),a("div",{staticClass:"col-md-3"}),a("div",{staticClass:"col-md-3"},[a("label",{staticClass:"col-form-label px-1",staticStyle:{width:"100%"},attrs:{for:"最初に戻る"}},[e._v("最初に戻る：")]),a("el-button",{staticStyle:{width:"40%"},attrs:{type:"info",disabled:e.data.isSave},on:{click:function(t){e.initInput()}}},[e._v("最初に戻る")])],1)])]),a("el-form",{ref:"logForm",attrs:{model:e.data.log,"label-width":"120px"}},[a("div",{staticClass:"row",staticStyle:{"margin-top":"4%"}},[a("div",{staticClass:"col-12",staticStyle:{"text-align":"right","margin-top":"2%"}},[e.data.isSearch?a("el-button",{staticStyle:{width:"30%"},attrs:{type:"danger",disabled:e.data.isSave},on:{click:function(t){e.save()}}},[e._v("保存")]):e._e()],1),e._l(e.data.log.service,function(t,i){return a("div",{staticClass:"col-12",staticStyle:{"margin-top":"2%"}},[a("el-card",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-2"},[a("label",{staticClass:"col-form-label px-1",staticStyle:{width:"100%"},attrs:{for:"行先選択"}},[e._v("行先選択")]),a("el-select",{attrs:{name:"name",disabled:e.data.isSave},model:{value:t.ServiceLog.DestinationID,callback:function(a){e.$set(t.ServiceLog,"DestinationID",a)},expression:"ServiceLog.ServiceLog.DestinationID"}},e._l(e.data.destinations,function(e){return a("el-option",{attrs:{value:e.DestinationID,label:e.DestinationName}})}))],1),a("div",{staticClass:"col-2"},[a("label",{staticClass:"col-form-label px-1",staticStyle:{width:"100%"},attrs:{for:"車両選択"}},[e._v("車両選択")]),a("el-select",{attrs:{name:"name",disabled:e.data.isSave},model:{value:t.ServiceLog.VehicleID,callback:function(a){e.$set(t.ServiceLog,"VehicleID",a)},expression:"ServiceLog.ServiceLog.VehicleID"}},e._l(e.data.vehicles,function(e){return a("el-option",{attrs:{value:e.VehicleID,label:e.VehicleName}})}))],1),a("div",{staticClass:"col-5"}),a("div",{staticClass:"col-3"},[a("label",{staticClass:"col-form-label px-1",staticStyle:{width:"100%"},attrs:{for:"運行順番の入れ替え"}},[e._v("運行順番の入れ替え")]),a("el-button",{attrs:{type:"info",disabled:0==i||e.data.isSave},on:{click:function(t){e.changeServiceRogTurn(i,"up")}}},[e._v("▲")]),a("el-button",{attrs:{type:"info",disabled:i==e.data.log.service.length-1||e.data.isSave},on:{click:function(t){e.changeServiceRogTurn(i,"down")}}},[e._v("▼")])],1),e._l(t.RollCallLog,function(s,l){return a("div",{staticClass:"col-12"},[a("el-card",{staticStyle:{"margin-top":"2%",width:"90%",float:"left"}},[a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[e._v("\n                                                        点呼時間\n                                                    ")]),a("th",[e._v("\n                                                        点呼方法\n                                                    ")]),a("th",[e._v("\n                                                        アルコール検知器の有無\n                                                    ")]),a("th",[e._v("\n                                                        酒気帯びの有無\n                                                    ")])])]),a("tr",{staticStyle:{"border-bottom":"solid 0.5px #d3d3d3"}},[a("td",[a("el-form-item",{attrs:{"label-width":"0",prop:"service["+i+"].RollCallLog["+l+"].RollCallTime",rules:{required:!0,message:"点呼時間が入力されていません",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"datetime-local",disabled:e.data.isSave},model:{value:s.RollCallTime,callback:function(t){e.$set(s,"RollCallTime",t)},expression:"RollCallLog.RollCallTime"}})],1)],1),a("td",[a("el-select",{staticStyle:{width:"100%"},attrs:{name:"name",disabled:e.data.isSave},model:{value:s.RollCallMethodID,callback:function(t){e.$set(s,"RollCallMethodID",t)},expression:"RollCallLog.RollCallMethodID"}},e._l(e.data.rollcallmethods,function(e){return a("el-option",{attrs:{value:e.RollCallMethodID,label:e.RollCallMethodName}})}))],1),a("td",[a("el-select",{staticStyle:{width:"100%"},attrs:{name:"name",disabled:e.data.isSave},model:{value:s.IsUseAlcoholDetector,callback:function(t){e.$set(s,"IsUseAlcoholDetector",t)},expression:"RollCallLog.IsUseAlcoholDetector"}},[a("el-option",{attrs:{value:!0,label:"有"}}),a("el-option",{attrs:{value:!1,label:"無"}})],1)],1),a("td",[a("el-select",{staticStyle:{width:"100%"},attrs:{name:"name",disabled:e.data.isSave},model:{value:s.IsDrinking,callback:function(t){e.$set(s,"IsDrinking",t)},expression:"RollCallLog.IsDrinking"}},[a("el-option",{attrs:{value:!1,label:"無"}}),a("el-option",{attrs:{value:!0,label:"有"}})],1)],1)]),a("thead",[a("tr",[a("th",[e._v("\n                                                        疾病・疲労等の有無\n                                                    ")]),a("th",[e._v("\n                                                        詳細\n                                                    ")]),a("th",{attrs:{colspan:"2"}},[e._v("\n                                                        備考\n                                                    ")])])]),a("tr",{staticStyle:{"border-bottom":"solid 0.5px #d3d3d3"}},[a("td",[a("el-select",{staticStyle:{width:"100%"},attrs:{name:"name",disabled:e.data.isSave},model:{value:s.IsDisease,callback:function(t){e.$set(s,"IsDisease",t)},expression:"RollCallLog.IsDisease"}},[a("el-option",{attrs:{value:!0,label:"有"}}),a("el-option",{attrs:{value:!1,label:"無"}})],1)],1),a("td",[a("el-select",{staticStyle:{width:"100%"},attrs:{name:"name",disabled:!s.IsDisease||e.data.isSave},model:{value:s.DiseasesID,callback:function(t){e.$set(s,"DiseasesID",t)},expression:"RollCallLog.DiseasesID"}},e._l(e.data.diseases,function(e){return a("el-option",{attrs:{value:e.DiseaseID,label:e.DiseaseName}})}))],1),a("td",{attrs:{colspan:"2"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",disabled:void 0==e.data.diseases[e.getDiseasesIndex(s.DiseasesID)]||!e.data.diseases[e.getDiseasesIndex(s.DiseasesID)].NoteFlag},model:{value:s.NoteOfDiseases,callback:function(t){e.$set(s,"NoteOfDiseases",t)},expression:"RollCallLog.NoteOfDiseases"}})],1)]),a("thead",[a("tr",[a("th",[e._v("\n                                                        日常点検の有無\n                                                    ")]),a("th",[e._v("\n                                                        点呼執行者\n                                                    ")]),a("th",[e._v("\n                                                        指示事項\n                                                    ")]),a("th",[e._v("\n                                                        点呼種類\n                                                    ")])])]),a("tr",{staticStyle:{"border-bottom":"solid 0.5px #d3d3d3"}},[a("td",[a("el-select",{staticStyle:{width:"100%"},attrs:{name:"name",disabled:e.data.isSave},model:{value:s.IsPerformedDailyCheck,callback:function(t){e.$set(s,"IsPerformedDailyCheck",t)},expression:"RollCallLog.IsPerformedDailyCheck"}},[a("el-option",{attrs:{value:!0,label:"有"}}),a("el-option",{attrs:{value:!1,label:"無"}})],1)],1),a("td",[a("el-select",{staticStyle:{width:"100%"},attrs:{name:"name",disabled:e.data.isSave},model:{value:s.RollCallerID,callback:function(t){e.$set(s,"RollCallerID",t)},expression:"RollCallLog.RollCallerID"}},e._l(e.data.rollcallers,function(e){return a("el-option",{attrs:{value:e.MemberID,label:e.MemberName}})}))],1),a("td",[a("el-select",{staticStyle:{width:"100%"},attrs:{name:"name",disabled:e.data.isSave},model:{value:s.InstructionID,callback:function(t){e.$set(s,"InstructionID",t)},expression:"RollCallLog.InstructionID"}},e._l(e.data.instructions,function(e){return a("el-option",{attrs:{value:e.InstructionID,label:e.InstructionName}})}))],1),a("td",[a("el-form-item",{attrs:{"label-width":"0",prop:"service["+i+"].RollCallLog["+l+"].RollCallKind",rules:{required:!0,message:"点呼の種類が選択されていません",trigger:"blur"}}},[a("el-select",{staticStyle:{width:"100%"},attrs:{name:"name",disabled:e.data.isSave},model:{value:s.RollCallKind,callback:function(t){e.$set(s,"RollCallKind",t)},expression:"RollCallLog.RollCallKind"}},[a("el-option",{attrs:{value:0,label:"乗務前点呼"}}),a("el-option",{attrs:{value:1,label:"乗務後点呼"}}),a("el-option",{attrs:{value:2,label:"途中点呼"}})],1)],1)],1)])]),a("div",{staticClass:"col-12",staticStyle:{"text-align":"right","margin-top":"2%"}},[a("el-button",{staticStyle:{width:"20%",display:"inline"},attrs:{type:"info",disabled:e.data.isSave},on:{click:function(t){e.removeRollCallMeisai(i,l)}}},[e._v("点呼を削除")])],1)]),a("div",{staticStyle:{width:"10%",float:"left","text-align":"center","margin-top":"15%"}},[a("div",[a("el-button",{attrs:{type:"info",disabled:0==l||e.data.isSave},on:{click:function(t){e.changeRollCallRogTurn(i,l,"up")}}},[e._v("▲")])],1),a("div",{staticStyle:{"margin-top":"5%"}},[a("el-button",{attrs:{type:"info",disabled:l==t.RollCallLog.length-1||e.data.isSave},on:{click:function(t){e.changeRollCallRogTurn(i,l,"down")}}},[e._v("▼")])],1)])],1)}),a("div",{staticClass:"col-12",staticStyle:{"text-align":"center","margin-top":"2%"}},[a("el-button",{staticStyle:{width:"40%",display:"inline"},attrs:{type:"warning",disabled:e.data.isSave},on:{click:function(t){e.addRollCallMeisai(i)}}},[e._v("点呼を追加")])],1),a("div",{staticClass:"col-12",staticStyle:{"text-align":"right","margin-top":"2%"}},[a("el-button",{staticStyle:{width:"20%",display:"inline"},attrs:{type:"info",disabled:e.data.isSave},on:{click:function(t){e.remobeServiceMeisai(i)}}},[e._v("運行を削除")])],1)],2)])],1)}),a("div",{staticClass:"col-12",staticStyle:{"text-align":"center","margin-top":"2%"}},[e.data.isSearch?a("el-button",{staticStyle:{width:"40%",display:"inline"},attrs:{type:"primary",disabled:e.data.isSave},on:{click:function(t){e.addServiceMeisai()}}},[e._v("運行を追加")]):e._e()],1),a("div",{staticClass:"col-12",staticStyle:{"text-align":"right","margin-top":"2%"}},[e.data.isSearch?a("el-button",{staticStyle:{width:"30%"},attrs:{type:"danger",disabled:e.data.isSave},on:{click:function(t){e.save()}}},[e._v("保存")]):e._e()],1)],2)])],1)])],1)},ke=[],$e={name:"niukeSyukei",components:{Card:L,ElIncrementSearch:Ce},data:function(){return{data:{companyID:"",search:{model:{MemberID:"",ServiceDate:"2020-11-18"},validation:{MemberID:[{required:!0,message:"社員名が入力されていません",trigger:"blur"}],ServiceDate:[{required:!0,message:"運行日が入力されていません",trigger:"blur"}]}},isSearch:!1,isSave:!1,log:{service:[],driverID:"",driverName:"",serviceDate:"",deletes:{ServiceLogs:[],RollCallLogs:[]}},meisai:[],updateButton:"",drivers:[],rollcallers:[],destinations:[],vehicles:[],rollcallmethods:[],diseases:[],instructions:[]}}},methods:{getDiseasesIndex:function(e){for(var t=0;t<this.data.diseases.length;t++)if(this.data.diseases[t].DiseaseID==e)return t},getDriversIndex:function(e){for(var t=0;t<this.data.drivers.length;t++)if(this.data.drivers[t].MemberID==e)return t},getDriver:function(e){return this.data.drivers[this.getDriversIndex(e)]},changeRollCallRogTurn:function(e,t,a){var i=this.data.log.service[e].RollCallLog;"up"==a?i.splice(t-1,2,i[t],i[t-1]):"down"==a&&i.splice(t,2,i[t+1],i[t])},changeServiceRogTurn:function(e,t){var a=this.data.log.service;"up"==t?a.splice(e-1,2,a[e],a[e-1]):"down"==t&&a.splice(e,2,a[e+1],a[e])},addServiceMeisai:function(){var e=this.getDriver(this.data.log.driverID),t=e.VehicleID,a=e.DestinationID;this.data.log.service.push({ServiceLog:{DestinationID:a,VehicleID:t,CompanyID:this.data.companyID,EditorID:this.data.editorID,ServiceLogID:-1,DriverID:this.data.log.driverID,ServiceDate:this.data.log.serviceDate},RollCallLog:[{RollCallLogID:-1,CompanyID:this.data.companyID,EditorID:this.data.editorID}]})},remobeServiceMeisai:function(e){if(window.confirm("削除しますか？")){if(-1!=this.data.log.service[e].ServiceLog.ServiceLogID)for(var t in this.data.log.deletes.ServiceLogs.push(this.data.log.service[e].ServiceLog),this.data.log.service[e].RollCallLog)this.data.log.deletes.RollCallLogs.push(this.data.log.service[e].RollCallLog[t]);this.data.log.service.splice(e,1)}},addRollCallMeisai:function(e){this.data.log.service[e].RollCallLog.push({CompanyID:this.data.companyID,EditorID:this.data.editorID,RollCallLogID:-1})},removeRollCallMeisai:function(e,t){window.confirm("削除しますか？")&&(-1!=this.data.log.service[e].RollCallLog[t].RollCallLogID&&this.data.log.deletes.RollCallLogs.push(this.data.log.service[e].RollCallLog[t]),console.log(this.data.log.deletes),this.data.log.service[e].RollCallLog.splice(t,1))},search:function(e){var t=this;this.$refs["searchForm"].validate(function(a){if(a){if(t.data.isSearch&&!e&&!window.confirm("点呼記録が保存されませんがよろしいですか？"))return!1;t.init(),t.getRollCallLogsInput(e)}})},init:function(){this.$set(this.data.log,"service",[])},initInput:function(){if(!window.confirm("点呼記録が保存されませんがよろしいですか？"))return!1;this.init(),this.data.isSearch=!1},getRollCallLogsInput:function(e){var t=this;axios.get(R.ApiUrl().GetRollCallLogInputs([{key:"MemberID",value:this.data.search.model.MemberID},{key:"ServiceDate",value:this.data.search.model.ServiceDate}])).then(function(a){t.data.log.driverID=t.data.search.model.MemberID,t.data.log.driverName=t.getDriver(t.data.search.model.MemberID).MemberName,t.data.log.serviceDate=t.data.search.model.ServiceDate,console.log(a.data),0==a.data.length?t.addServiceMeisai():t.$set(t.data.log,"service",a.data),t.data.isSearch=!0,console.log(e),e&&t.$store.commit("changeMoveRollCallLogInput",{ServiceDate:"",MemberID:""})}).catch(function(e){t.data.isSearch=!1})},save:function(){var e=this;this.$refs["logForm"].validate(function(t){if(t){for(var a in e.data.log.service){var i=0,s=0;for(var l in e.data.log.service[a].RollCallLog)0==e.data.log.service[a].RollCallLog[l].RollCallKind?i++:1==e.data.log.service[a].RollCallLog[l].RollCallKind&&s++;if(console.log(i,s),i>=2||s>=2)return alert("乗務前点呼及び乗務後点呼は2つ以上登録できません"),!1}e.data.isSave=!0,axios.post(R.ApiUrl().RollCallLogInputsSave(),e.data.log.service).then(function(t){t.data?axios.put(R.ApiUrl().RollCallLogInputsDelete(),e.data.log.deletes).then(function(t){t.data?e.$message({message:"登録に成功しました",type:"success"}):e.$message({message:"登録に失敗しました",type:"error"}),e.data.isSave=!1}).catch(function(t){e.$message({message:"通信に失敗しました",type:"error"}),e.data.isSave=!1}):e.$message({message:"登録に失敗しました",type:"error"})}).catch(function(t){e.$message({message:"通信に失敗しました",type:"error"}),e.data.isSave=!1})}})}},created:function(){var e=this;this.data.companyID=this.$store.state.login.companyID,this.data.editorID=this.$store.state.login.userID,this.data.search.model.ServiceDate=f.nowJapanDateInput(),axios.get(R.ApiUrl().GetRollCallLogInputMasterData([{key:"CompanyID",value:this.data.companyID}])).then(function(t){e.$set(e.data,"drivers",t.data.Drivers),e.$set(e.data,"rollcallers",t.data.RollCallers),e.$set(e.data,"destinations",t.data.Destinations),e.$set(e.data,"vehicles",t.data.Vehicles),e.$set(e.data,"rollcallmethods",t.data.RollCallMethods),e.$set(e.data,"diseases",t.data.Diseases),e.$set(e.data,"instructions",t.data.Instructions),console.log(e.data.drivers),""!=e.$store.state.moveRollCallLogInput.ServiceDate&&(e.data.search.model.ServiceDate=e.$store.state.moveRollCallLogInput.ServiceDate,e.data.search.model.MemberID=e.$store.state.moveRollCallLogInput.MemberID,e.search(!0))}).catch(function(e){return console.log(e)})},mounted:function(){},watch:{}},Le=$e,Re=Object(d["a"])(Le,xe,ke,!1,null,null,null),Ne=Re.exports,Ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("点呼記録簿出力")])]),a("div",{attrs:{slot:"default"},slot:"default"},[a("el-form",{ref:"form",attrs:{model:e.data.model,rules:e.data.validation,"label-width":"120px"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("label",{staticClass:"col-form-label px-1",staticStyle:{width:"100%"},attrs:{for:"運行日"}},[e._v("運行日")]),a("el-form-item",{attrs:{"label-width":"0",prop:"serviceDate"}},[a("el-input",{attrs:{type:"date"},model:{value:e.data.model.serviceDate,callback:function(t){e.$set(e.data.model,"serviceDate",t)},expression:"data.model.serviceDate"}})],1)],1)])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12",staticStyle:{"text-align":"left","margin-top":"2%"}},[a("el-button",{staticStyle:{width:"20%"},attrs:{type:"primary"},on:{click:function(t){e.output()}}},[e._v("出力")])],1)])],1)])],1)},Oe=[],Ve={name:"niukeNyuryokuSyoki",components:{Card:L},data:function(){return{data:{model:{serviceDate:""},validation:{serviceDate:[{required:!0,message:"出荷日付が入力されていません",trigger:"blur"}]}}}},methods:{output:function(){var e=this;axios.get(R.ApiUrl().GetRollCallLogFormOutputURL([{key:"CompanyID",value:this.data.companyID},{key:"ServiceDate",value:this.data.model.serviceDate}])).then(function(t){var a=t.data.url;null!=a?window.open(a):e.$message({message:"運行データが無いため帳票が出力されません",type:"error"}),console.log(t.data)}).catch(function(e){return console.log(e)})}},created:function(){this.data.companyID=this.$store.state.login.companyID,this.data.editorID=this.$store.state.login.userID,this.data.model.serviceDate=f.nowJapanDateInput()}},Ue=Ve,Ge=Object(d["a"])(Ue,Ae,Oe,!1,null,null,null),Ee=Ge.exports,Fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("ログイン")])]),a("div",{attrs:{slot:"default"},slot:"default"},[a("el-form",{ref:"loginForm",staticClass:"demo-ruleForm",attrs:{model:e.login,rules:e.validation,"label-width":"120px"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("el-form-item",{attrs:{label:"会社ID",prop:"companyID"}},[a("el-input",{staticStyle:{width:"40%"},model:{value:e.login.companyID,callback:function(t){e.$set(e.login,"companyID",t)},expression:"login.companyID"}})],1)],1),a("div",{staticClass:"col-md-12"},[a("el-form-item",{attrs:{label:"社員ID",prop:"memberID"}},[a("el-input",{staticStyle:{width:"40%"},model:{value:e.login.memberID,callback:function(t){e.$set(e.login,"memberID",t)},expression:"login.memberID"}})],1)],1),a("div",{staticClass:"col-md-12"},[a("el-form-item",{attrs:{label:"パスワード",prop:"password"}},[a("el-input",{staticStyle:{width:"40%"},model:{value:e.login.password,callback:function(t){e.$set(e.login,"password",t)},expression:"login.password"}})],1)],1)])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticStyle:{"text-align":"right",width:"100%"}},[a("el-button",{staticStyle:{"margin-right":"3%"},attrs:{type:"primary"},on:{click:function(t){e.submitForm()}}},[e._v("ログイン")])],1)])])],1)])},qe=[],je={name:"login",data:function(){return{login:{companyID:"",memberID:"",password:""},validation:{companyID:[{required:!0,message:"会社IDが入力されていません",trigger:"blur"}],memberID:[{required:!0,message:"社員IDが入力されていません",trigger:"blur"}],password:[{required:!0,message:"パスワードが入力されていません",trigger:"blur"}]}}},methods:{submitForm:function(){var e=this;this.$refs["loginForm"].validate(function(t){t&&e.loginCheck()})},loginCheck:function(){var e=this;axios.get(R.ApiUrl().Login([{key:"CompanyCode",value:this.login.companyID},{key:"MemberCode",value:this.login.memberID},{key:"Password",value:this.login.password}])).then(function(t){if(console.log(t.data),t.data.IsLogin){var a=t.data.Member;n.login(e,{userID:a.MemberID,userName:a.MemberName,userPass:a.Password,companyID:a.CompanyID,role:a.RoleID,loggedIn:!0}),e.$router.push("/uedaunyu/")}else e.$message({message:"会社ID、社員ID又はパスワードが違います",type:"error"})}).catch(function(t){console.log(t),e.$message({message:"通信に失敗しました",type:"error"})})}}},Ke=je,Te=Object(d["a"])(Ke,Fe,qe,!1,null,"04c17c6a",null),Pe=Te.exports;s["default"].use(C["a"]);var Je=new C["a"]({routes:[{path:"/",component:Pe},{path:"/uedaunyu",component:m,children:[{path:"/",component:I},{path:"masterMember",component:V},{path:"masterDestination",component:j},{path:"masterVehicle",component:B},{path:"masterInstruction",component:le},{path:"masterDisease",component:X},{path:"masterAlertSetting",component:ue},{path:"rollCallStatus",component:Me},{path:"rollCallLogInput",component:Ne},{path:"rollCallLogFormOutput",component:Ee}]}]}),ze=a("5c96"),Be=a.n(ze),Ye=a("c3ff"),He=a.n(Ye),Ze=(a("0fae"),a("e05f"),a("bc3a")),Qe=a.n(Ze),We=a("2f62"),Xe=a("0e44");s["default"].config.productionTip=!0,s["default"].use(Be.a,{locale:He.a}),s["default"].use(Qe.a),s["default"].use(We["a"]),s["default"].use(Xe["a"]),s["default"].directive("focus-first-on-load",{inserted:function(e,t,a){a.elm[0].focus()}}),s["default"].directive("focus-next-on-enter",{inserted:function(e,t,a){e.addEventListener("keydown",function(e){console.log("focusNextOnEnter",e);var t=Object(i["a"])(a.elm.elements).indexOf(e.target);13===e.keyCode&&t<a.elm.length-1&&(e.preventDefault(),e.stopPropagation(),a.elm[t+1].focus())})}});var et={userID:"",userName:"",userPass:"",companyID:"",role:"",loggedIn:!1},tt=new We["a"].Store({state:{login:et,openedMenuIndex:{categoryIndex:"",sidebarIndex:""},moveRollCallLogInput:{ServiceDate:"",MemberID:""}},mutations:{resetLoginInfo:function(e){e.login={userID:"",userName:"",userPass:"",companyID:"",role:"",loggedIn:!1}},updateLoginInfo:function(e,t){var a=t.userID,i=t.userName,s=t.userPass,l=t.companyID,r=t.role,n=t.loggedIn;e.login={userID:a,userName:i,userPass:s,companyID:l,role:r,loggedIn:n}},changeOpenedMenuIndex:function(e,t){var a=t.categoryIndex,i=t.sidebarIndex;e.openedMenuIndex.categoryIndex=a,e.openedMenuIndex.sidebarIndex=i},changeMoveRollCallLogInput:function(e,t){var a=t.ServiceDate,i=t.MemberID;e.moveRollCallLogInput={ServiceDate:a,MemberID:i}}},plugins:[Object(Xe["a"])({storage:window.sessionStorage})]});new s["default"]({router:Je,store:tt,render:function(e){return e(h["default"])},created:function(){localStorage.setItem("initialState",JSON.stringify(et))}}).$mount("#app")},"582d":function(e,t,a){"use strict";a("7a9e")},"68f9":function(e,t,a){"use strict";a("ca55")},"7a9e":function(e,t,a){},"9cf3":function(e,t,a){"use strict";var i=a("f87f"),s=a("c528"),l=a("2877"),r=Object(l["a"])(s["default"],i["a"],i["b"],!1,null,"0c82cc6e",null);t["default"]=r.exports},a537:function(e,t){},c528:function(e,t,a){"use strict";var i=a("a537"),s=a.n(i);t["default"]=s.a},ca55:function(e,t,a){},f87f:function(e,t,a){"use strict";a.d(t,"a",function(){return i}),a.d(t,"b",function(){return s});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},s=[]}});
//# sourceMappingURL=app.2069affe.js.map