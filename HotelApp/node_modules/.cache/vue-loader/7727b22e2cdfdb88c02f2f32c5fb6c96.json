{"remainingRequest":"C:\\Users\\takum\\Documents\\hokuriku_tosbac\\HotelApp\\project\\HotelApp\\HotelApp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\takum\\Documents\\hokuriku_tosbac\\HotelApp\\project\\HotelApp\\HotelApp\\src\\pages\\MasterAlertSetting.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\takum\\Documents\\hokuriku_tosbac\\HotelApp\\project\\HotelApp\\HotelApp\\src\\pages\\MasterAlertSetting.vue","mtime":1607357266515},{"path":"C:\\Users\\takum\\Documents\\hokuriku_tosbac\\HotelApp\\project\\HotelApp\\HotelApp\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\takum\\Documents\\hokuriku_tosbac\\HotelApp\\project\\HotelApp\\HotelApp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\takum\\Documents\\hokuriku_tosbac\\HotelApp\\project\\HotelApp\\HotelApp\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n// @ is an alias to /src\nimport Card from '@/components/Card/Card.vue'\nimport arrayFunction from '@/js/array.js'\nimport url from '@/js/api_url.js'\n\nexport default {\n    name: 'niukeSyukei',\n    components: {\n        Card\n    },\n    data: function () {\n        return {\n            data: {\n                companyID: \"\",\n                //新規作成のIDは-1ととりあえず置いておく\n                //CRUDKeyは0が何もなし、1が編集,2が削除,3が新規\n                newID: -1,\n                search: {\n                    model: {\n                        memberName: \"\"\n                    },\n                    validation: {\n                        Name: [\n                            { required: true, message: 'アラート設定名が入力されていません', trigger: 'blur' },\n                        ],\n                    }\n                },\n                master: {\n                    model: {\n                        meisai: [],\n                    },\n                },\n                disabled: {\n                    save: false,\n                },\n            },\n        }\n    },\n    methods: {\n        getAlertKindName: function (AlertKind) {\n\n            if (AlertKind == 0) {\n\n                return \"点呼間隔\";\n\n            } else if (AlertKind == 1) {\n\n                return \"休憩間点呼\";\n\n            } else if (AlertKind == 2) {\n\n                return \"両方当てはまる場合\"\n            }\n\n        },\n        getAlertSettings: function () {\n\n            axios.get(url.ApiUrl().GetAlertSettingsMaster([{ key: \"CompanyID\", value: this.data.companyID }]))\n                .then(response => {\n\n\n                    this.$set(this.data.master.model, \"meisai\", response.data);\n\n                })\n                .catch(response => console.log(response))\n\n        },\n        changeCrud: function (meisai, value) {\n\n            if (meisai.Crud != 3) {\n\n                this.$set(meisai, 'Crud', value)\n\n            }\n        },\n        changeEditorID: function (meisai) {\n\n            for (var i in meisai) {\n\n                if (meisai[i].Crud != 0) {\n\n                    meisai[i].AlertSetting.EditorID = this.data.editorID;\n                }\n            }\n        },\n        submit: function () {\n\n            this.$refs['masterForm'].validate((valid) => {\n\n                if (valid) {\n\n                    this.changeEditorID(this.data.master.model.meisai);\n\n                    //※axiosによる更新処理\n\n                    this.data.disabled.save = true;\n\n                    axios.post(url.ApiUrl().AlertSettingsMasterSave(), this.data.master.model.meisai)\n                        .then(response => {\n\n                            if (response.data) {\n\n                                this.$message({\n                                    message: '登録に成功しました',\n                                    type: 'success'\n                                });\n\n                                this.getAlertSettings();\n                            } else {\n\n                                this.$message({\n                                    message: '登録に失敗しました',\n                                    type: 'error'\n                                });\n\n                            }\n\n\n                            this.data.disabled.save = false;\n\n                        })\n                        .catch(response => {\n                            this.$message({\n                                message: '通信に失敗しました',\n                                type: 'error'\n                            });\n\n                            this.data.disabled.save = false;\n\n                        });\n                }\n            })\n\n        }\n    },\n    created: function () {\n        this.data.companyID = this.$store.state.login.companyID;\n        this.data.editorID = this.$store.state.login.userID;\n\n        this.getAlertSettings();\n\n    },\n    mounted: function () {\n\n\n    },\n    watch: {\n\n    }\n}\n",{"version":3,"sources":["MasterAlertSetting.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0EA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA","file":"MasterAlertSetting.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n    <div>\r\n        <el-card>\r\n            <div slot='header'>\r\n                <span>アラート設定マスタ</span>\r\n            </div>\r\n            <div slot='default'>\r\n                <div class=\"row\" style=\"margin-top:4%;\">\r\n                    <div class=\"col-12\">\r\n                        <el-form :model=\"data.master.model\" :rules=\"data.master.validation\" ref=\"masterForm\" label-width=\"120px\">\r\n                            <table class=\"table\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>\r\n                                            アラート設定種類\r\n                                        </th>\r\n                                        <th>\r\n                                            アラート色\r\n                                        </th>\r\n                                        <th>\r\n                                            アラート表示時間間隔\r\n                                        </th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tr v-for=\"(meisai_data,index) in data.master.model.meisai\" v-if=\"meisai_data.Crud != 2\">\r\n                                    <td>\r\n                                        {{getAlertKindName(meisai_data.AlertSetting.AlertKind)}}\r\n                                    </td>\r\n                                    <td>\r\n                                        <el-form-item label-width=\"0\"\r\n                                                      :prop=\"'meisai[' + index + '].AlertSetting.AlertColor'\"\r\n                                                      :rules=\"{\r\n                                                              required: true, message: 'アラート色が入力されていません', trigger: 'blur'\r\n                                                              }\">\r\n                                               <el-color-picker style='width:100%;'\r\n                                                             v-model=\"meisai_data.AlertSetting.AlertColor\"\r\n                                                             @change=\"changeCrud(meisai_data, 1)\"\r\n                                                             :disabled=\"data.disabled.save\"></el-color-picker>\r\n                                        </el-form-item>\r\n                                    </td>\r\n                                    <td>\r\n                                        <el-form-item label-width=\"0\"\r\n                                                      :prop=\"'meisai[' + index + '].AlertSetting.AlertInterval'\"\r\n                                                      :rules=\"{\r\n                                                              required: true, message: 'アラート表示時間間隔が入力されていません', trigger: 'blur'\r\n                                                              }\"\r\n                                                      v-if=\"meisai_data.AlertSetting.AlertKind != 2\"\r\n                                                      >\r\n                                            <el-input-number type='text'\r\n                                                             style='width:100%;'\r\n                                                             v-model=\"meisai_data.AlertSetting.AlertInterval\"\r\n                                                             @change=\"changeCrud(meisai_data, 1)\"\r\n                                                             :min=\"0\"\r\n                                                             controls-position=\"right\"\r\n                                                             :disabled=\"data.disabled.save\"></el-input-number>\r\n                                        </el-form-item>\r\n                                    </td>\r\n                                </tr>\r\n                            </table>\r\n                        </el-form>\r\n                        <div style=\"text-align:right;\">\r\n                            <el-button style='margin-left:2%;width:10%;' type='danger' :disabled=\"data.disabled.save\" @click=\"submit\">保存</el-button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n\r\n\r\n            </div>\r\n        </el-card>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    // @ is an alias to /src\r\n    import Card from '@/components/Card/Card.vue'\r\n    import arrayFunction from '@/js/array.js'\r\n    import url from '@/js/api_url.js'\r\n\r\n    export default {\r\n        name: 'niukeSyukei',\r\n        components: {\r\n            Card\r\n        },\r\n        data: function () {\r\n            return {\r\n                data: {\r\n                    companyID: \"\",\r\n                    //新規作成のIDは-1ととりあえず置いておく\r\n                    //CRUDKeyは0が何もなし、1が編集,2が削除,3が新規\r\n                    newID: -1,\r\n                    search: {\r\n                        model: {\r\n                            memberName: \"\"\r\n                        },\r\n                        validation: {\r\n                            Name: [\r\n                                { required: true, message: 'アラート設定名が入力されていません', trigger: 'blur' },\r\n                            ],\r\n                        }\r\n                    },\r\n                    master: {\r\n                        model: {\r\n                            meisai: [],\r\n                        },\r\n                    },\r\n                    disabled: {\r\n                        save: false,\r\n                    },\r\n                },\r\n            }\r\n        },\r\n        methods: {\r\n            getAlertKindName: function (AlertKind) {\r\n\r\n                if (AlertKind == 0) {\r\n\r\n                    return \"点呼間隔\";\r\n\r\n                } else if (AlertKind == 1) {\r\n\r\n                    return \"休憩間点呼\";\r\n\r\n                } else if (AlertKind == 2) {\r\n\r\n                    return \"両方当てはまる場合\"\r\n                }\r\n\r\n            },\r\n            getAlertSettings: function () {\r\n\r\n                axios.get(url.ApiUrl().GetAlertSettingsMaster([{ key: \"CompanyID\", value: this.data.companyID }]))\r\n                    .then(response => {\r\n\r\n\r\n                        this.$set(this.data.master.model, \"meisai\", response.data);\r\n\r\n                    })\r\n                    .catch(response => console.log(response))\r\n\r\n            },\r\n            changeCrud: function (meisai, value) {\r\n\r\n                if (meisai.Crud != 3) {\r\n\r\n                    this.$set(meisai, 'Crud', value)\r\n\r\n                }\r\n            },\r\n            changeEditorID: function (meisai) {\r\n\r\n                for (var i in meisai) {\r\n\r\n                    if (meisai[i].Crud != 0) {\r\n\r\n                        meisai[i].AlertSetting.EditorID = this.data.editorID;\r\n                    }\r\n                }\r\n            },\r\n            submit: function () {\r\n\r\n                this.$refs['masterForm'].validate((valid) => {\r\n\r\n                    if (valid) {\r\n\r\n                        this.changeEditorID(this.data.master.model.meisai);\r\n\r\n                        //※axiosによる更新処理\r\n\r\n                        this.data.disabled.save = true;\r\n\r\n                        axios.post(url.ApiUrl().AlertSettingsMasterSave(), this.data.master.model.meisai)\r\n                            .then(response => {\r\n\r\n                                if (response.data) {\r\n\r\n                                    this.$message({\r\n                                        message: '登録に成功しました',\r\n                                        type: 'success'\r\n                                    });\r\n\r\n                                    this.getAlertSettings();\r\n                                } else {\r\n\r\n                                    this.$message({\r\n                                        message: '登録に失敗しました',\r\n                                        type: 'error'\r\n                                    });\r\n\r\n                                }\r\n\r\n\r\n                                this.data.disabled.save = false;\r\n\r\n                            })\r\n                            .catch(response => {\r\n                                this.$message({\r\n                                    message: '通信に失敗しました',\r\n                                    type: 'error'\r\n                                });\r\n\r\n                                this.data.disabled.save = false;\r\n\r\n                            });\r\n                    }\r\n                })\r\n\r\n            }\r\n        },\r\n        created: function () {\r\n            this.data.companyID = this.$store.state.login.companyID;\r\n            this.data.editorID = this.$store.state.login.userID;\r\n\r\n            this.getAlertSettings();\r\n\r\n        },\r\n        mounted: function () {\r\n\r\n\r\n        },\r\n        watch: {\r\n\r\n        }\r\n    }\r\n</script>\r\n"]}]}